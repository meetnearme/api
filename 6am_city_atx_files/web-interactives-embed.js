!function(){"use strict";const e={RECEIVED_ANALYTICS:"HS_CTA_PARENT_RECEIVED_ANALYTICS",DEVICE_TYPE:"HS_CTA_PARENT_DEVICE_TYPE",PROXY_ANALYTICS_FN_CALLBACK:"HS_CTA_PARENT_PROXY_ANALYTICS_FN",INIT:"HS_CTA_PARENT_INIT",SHOWING_CTA:"HS_CTA_SHOWING_CTA",SEND_EXTRACTED_STYLES:"HS_SEND_EXTRACTED_STYLES",STARTED:"HS_CTA_STARTED",NAVIGATE_PAGE:"HS_CTA_NAVIGATE_PAGE",CLICK_EVENT:"HS_CTA_CLICK_EVENT",CLOSE_INTERACTIVE:"HS_CTA_CLOSE_INTERACTIVE",HAS_CLOSED:"HS_CTA_HAS_CLOSED",NEW_HEIGHT:"HS_CTA_NEW_HEIGHT",DISPLAY_CALL_TO_ACTION:"HS_DISPLAY_CALL_TO_ACTION",PROXY_ANALYTICS:"HS_CTA_PROXY_ANALYTICS",PROXY_ANALYTICS_FN:"HS_CTA_PROXY_ANALYTICS_FN",SEND_FORM_DEFINITION:"HS_SEND_FORM_DEFINITION",SEND_CTA_CONFIG:"HS_SEND_CTA_CONFIG",SEND_EMBED_CONTEXT:"HS_SEND_EMBED_CONTEXT",RECEIVE_FILTERED_STYLESHEETS:"RECEIVE_FILTERED_STYLESHEETS",SEND_STYLESHEETS:"SEND_STYLESHEETS",TRIGGER_CTA:"HS_CTA_TRIGGER_CTA",CTA_FORM_SUBMITTED:"HS_CTA_FORM_SUBMITTED",V4_FORM_READY:"HS_V4_FORM_READY",V4_RECAPTCHA_RENDER:"HS_V4_RECAPTCHA_RENDER",V4_RECAPTCHA_EXECUTE:"HS_V4_RECAPTCHA_EXECUTE",V4_RECAPTCHA_RESET:"HS_V4_RECAPTCHA_RESET",V4_RECAPTCHA_SUCCESS:"HS_V4_RECAPTCHA_SUCCESS",V4_RECAPTCHA_EXPIRED:"HS_V4_RECAPTCHA_EXPIRED",SEND_FORM_EXTRA_SUBMISSION_METADATA:"HS_SEND_FORM_EXTRA_SUBMISSION_METADATA",SEND_FORM_SUBMISSION_SUCCESS_INFO:"HS_SEND_FORM_SUBMISSION_SUCCESS_INFO",SEND_FORM_SUBMISSION_SUCCESS:"HS_SEND_FORM_SUBMISSION_SUCCESS",SEND_FORM_SUBMISSION_FAILED:"HS_SEND_FORM_SUBMISSION_FAILED",SEND_FORM_INTERACTION_NAVIGATE:"HS_SEND_FORM_INTERACTION_NAVIGATE",SEND_FORM_INTERACTION_NAVIGATE_NEXT:"HS_SEND_FORM_INTERACTION_NAVIGATE_NEXT",SEND_FORM_INTERACTION_NAVIGATE_PREVIOUS:"HS_SEND_FORM_INTERACTION_NAVIGATE_PREVIOUS",GET_FORM_FIELD_VALUES:"HS_GET_FORM_FIELD_VALUES",SEND_FORM_FIELD_VALUES:"HS_SEND_FORM_FIELD_VALUES",GET_FIELD_VALUE:"HS_GET_FIELD_VALUE",SET_FIELD_VALUE:"HS_SET_FIELD_VALUE",SEND_FIELD_VALUE:"HS_SEND_FIELD_VALUE",MEETINGS_BOOKING_SUCCESS:"HS_CTA_MEETINGS_BOOKING_SUCCESS"};function t(e,t={}){for(const i in t)Object.hasOwnProperty.call(t,i)&&(e.style[i]=t[i])}function i(...e){if(window.location.search.indexOf("hs_debug_interactive")>-1||window.location.host.includes("local.hsappstatic")){console.log("[web-interactives-embed]",...e);window.location.search.indexOf("hs_is_selenium")>-1&&console.log(...[...e].map((e=>JSON.stringify(e))))}}class s{constructor(){this.listeners=new Map}on(e,t){if(!this.listeners.has(e)){this.listeners.set(e,[t]);return}const i=this.listeners.get(e);this.listeners.set(e,[...i,t])}off(e){this.listeners.delete(e)}emit(e,t){const i=this.listeners.get(e);i&&i.length&&i.forEach((e=>e(t)))}reset(){this.listeners=new Map}}function n(){return new s}const o=(...e)=>{i("[GlobalIframeCommunication]",...e)};class r{constructor(){this.iframeCommunicators=new Map;this.eventEmitter=n();this.reset=()=>{this.eventEmitter.reset();this.iframeCommunicators=new Map}}registerHandler(e,t){this.eventEmitter.on(e,t)}registerHandlers(e){o("Registering handlers",e);Object.keys(e).forEach((t=>{const i=t,s=e[i];s&&this.registerHandler(i,s)}))}registerCommunicator(e,t){o("Registering communicator",t);const i=this.iframeCommunicators.get(t)||[];this.iframeCommunicators.set(t,[...i,e])}removeCommunicator(e){o("Removing Iframe Communicator from GlobalCommunication: ",e);this.iframeCommunicators.delete(e)}emit(e,t){o("Emitting event",{event:e,messagePayload:t});this.eventEmitter.emit(e,t)}broadcast(e,t){const i=this.iframeCommunicators.get(e);if(i){o("Broadcasting",i);i.forEach((e=>{e.sendMessage(t)}))}else o("Cannot find communcators array, not broadcasting",e,t)}broadcastAll(e){o("Broadcasting",e,"to all",this.iframeCommunicators);for(const[t,i]of this.iframeCommunicators)this.broadcast(t,e)}}var a=new r;function c(){return new MessageChannel}const l=(...e)=>{i("[iframeCommunication]",...e)};class h{constructor(t,i){this.queue=[];this.initialised=!1;this.events=new Map;this.eventEmitter=n();this.handleMessage=e=>{if(!e.data||!e.data.type)return;const{type:t,payload:i}=e.data;l("Handling message",{type:t,payload:i});this.eventEmitter.emit(t,i);a.emit(t,Object.assign({},i,{id:this.id}))};this.handleFrameLoaded=()=>{if(this.iframe.contentWindow){l("Iframe loaded",this.iframe);this.iframe.contentWindow.postMessage({type:e.INIT},"*",[this.channel.port2]);this.initialised=!0;this.flushQueue()}else l("Content window not there, not loading")};this.iframe=t;this.id=i;this.channel=c();this.channel.port1.onmessage=this.handleMessage;this.iframe.addEventListener("load",this.handleFrameLoaded);l("Iframe communication set up",i,t)}sendMessage({type:e,payload:t}){if(this.initialised){l("Posting message",{type:e,payload:t});this.channel.port1.postMessage({type:e,payload:t})}else{l("Queueing message",{type:e,payload:t});this.queue.push({type:e,payload:t})}}registerHandler(e,t){this.eventEmitter.on(e,t)}registerHandlers(e){l("Registering handlers in IframeCommunication",e);Object.keys(e).forEach((t=>{const i=t,s=e[i];s&&this.registerHandler(i,s)}))}removeHandler(e){l("Removing handler",e);this.eventEmitter.off(e)}remove(){l("Removing frame communicator:",this.id);this.channel.port1.close();a.removeCommunicator(this.id)}flushQueue(){if(this.initialised){l("Flushing queue",this.queue);this.queue.forEach((e=>{this.sendMessage(e)}))}else l("Not flushing queue, not initialised")}}function d(e,t){l("Creating iframe communication");const i=new h(e,t);a.registerCommunicator(i,t);return i}function u(e){const t=window.location.origin.startsWith("http:")?"http://":"https://";return e.startsWith(t)?e:`${t}${e.replace(/http(s)?:\/\//,"")}`}function m(e){e.style.border="none";e.style.height="100%";e.style.width="100%";e.style.visibility="hidden"}function g(e,t){const i=document.createElement("iframe");i.srcdoc=e;Object.keys(t).forEach((e=>{i.setAttribute(e,t[e])}));m(i);return i}function p(e,t){const i=document.createElement("iframe");i.src=u(e);Object.keys(t).forEach((e=>{i.setAttribute(e,t[e])}));m(i);return i}function v(e,t,i){e.startsWith("http")||(e=`https://${e}`);const s=new URL(e);s.searchParams.set(t,i);return s.href}function f(e,t){e.startsWith("http")||(e=`https://${e}`);if(0===Object.keys(t).length)return e;const i=new URL(e);Object.keys(t).forEach((e=>i.searchParams.set(e,t[e])));return i.href}function T(e,t){return e.replace(/#.*$/,"")===t.replace(/#.*$/,"")}const C=(...e)=>{i("[FrameComponent]",...e)},E=()=>{};class S{constructor({id:e,container:t,iframeSrc:i,resizeHeight:s,onFrameReady:n,useResponsiveStyling:o,extraAttributes:r={},srcdoc:a}){this.onFrameReady=E;this.resizeHeight=!0;this.handleHeightChange=({height:e})=>{if(!this.resizeHeight)return;const t=e+2*parseInt(getComputedStyle(this.iframe).borderTopWidth,10);C("Handle height change",this.id,{adjustedHeight:t,height:e});this.setContainerStyle({height:`${t}px`})};this.id=e;this.resizeHeight=s;if(o&&i){C("Responsive styling is enabled",e);i=v(i,"enableResponsiveStyles","true")}if(i)this.iframe=p(i,r);else if(a)this.iframe=g(a,r);else{C("No iframeSrc or srcdoc provided, creating empty iframe",e);this.iframe=p("",r)}this.container=t;this.iframeCommunicator=d(this.iframe,e);n&&(this.onFrameReady=n);t.appendChild(this.iframe);this.registerHandlers()}registerHandlers(){this.iframeCommunicator.registerHandlers({[e.STARTED]:this.onFrameReady,[e.NEW_HEIGHT]:this.handleHeightChange})}setStyle(e){C("Set style",this.id,e);t(this.iframe,e)}setShouldResize(e){this.resizeHeight=e}setContainerStyle(e){t(this.container,e)}}function b(e){return new S(e)}class y{constructor(e,t){this.listeners=new Set;this.batching=!1;this.queue=[];this.subscribe=e=>{this.listeners.add(e);let t=()=>{};this.options&&this.options.onSubscribe&&(t=this.options.onSubscribe(e,this));return()=>{this.listeners.delete(e);t()}};this.setState=e=>{const t=this.state;this.options&&this.options.updateFn?this.state=this.options.updateFn(t)(e):this.state=e(t);if(this.state!==t){this.queue.push((()=>{this.listeners.forEach((e=>e(this.state,t)));this.options&&this.options.onUpdate&&this.options.onUpdate(this.state,t)}));this._flush()}};this._flush=()=>{if(!this.batching){this.queue.forEach((e=>e()));this.queue=[]}};this.batch=e=>{this.batching=!0;e();this.batching=!1;this._flush()};this.state=e;this.options=t}}class w{constructor(){this.storage=[]}enqueue(e){this.storage.push(e)}dequeue(){return this.storage.shift()}peek(){return this.storage[0]}size(){return this.storage.length}}function I(){return new w}function A(e,t=!1){!window.navigator.userAgent.includes("Firefox")&&t?window.open(e,"_blank","noopener"):window.location.assign(e)}const O="hubspotutk",_="__hstc",M="__hssc",L=e=>{const t=document.cookie.match(`(^|[^;]+)\\s*${e}\\s*=\\s*([^;]+)`);return t?t.pop():""},P=()=>L(O),R=()=>L(_),F=()=>L(M),N=(...e)=>{i("[models/Analytics]",...e)};class k{constructor(){this._handleFetchSucceded=e=>{this.store.setState((t=>{const i={};i.path=e.path;i.referrerPath=e.referrerPath;i.referrer="";i.analyticsPageId=e.pageId;i.hsfp=e._getFingerprint();i.canonicalUrl=e.canonicalUrl;i.contentType=e.contentType;i.pageId=k.getPageId()||e.pageId;e.session&&(i.hssc=e.session.get());if(e.utk){i.hstc=e.utk.get();i.hutk=e.utk.visitor}return Object.assign({},t,i,{isLoaded:!0})}))};window._hsq=window._hsq||[];const e={isLoaded:!1,pageUrl:window.location.href,pageTitle:window.document.title,referrer:window.document.referrer,userAgent:window.navigator.userAgent,hutk:P(),hssc:F(),hstc:R(),pageId:k.getPageId()};this.store=new y(e);this.fetchAnalytics()}fetchAnalytics(){this._analyticsQueue.push(this._handleFetchSucceded)}refresh(){const e=new Promise((e=>{this._analyticsQueue.push((t=>{this._handleFetchSucceded(t);e()}))})),t=new Promise((e=>setTimeout(e,100)));return Promise.race([e,t])}subscribe(e){return this.store.subscribe(e)}get analytics(){return this.store.state}track(e){N("Tracking analytics",e);this._analyticsQueue.push(e)}get _analyticsQueue(){return window._hsq}static getPageId(){const e=window.hsVars;return e&&e.analytics_page_id?e.analytics_page_id:e&&e.page_id?e.page_id:null}static getLanguage(){const e=window.hsVars;return e&&e.language?e.language:null}}var H=new k;const D=(...e)=>{i("[AnalyticsProxyController]",...e)},V=["trackFormView","trackFormVisible","trackFormInteraction"];class B{constructor({applicationController:e,analyticsStore:t}){this.viewQueue=new Map;this.applicationController=e;this.analyticsStore=t;this.listenForAnalyticsUpdate();this.listenForProxyMessage()}listenForAnalyticsUpdate(){this.analyticsStore.subscribe(((t,i)=>{!i.isLoaded&&t.isLoaded&&a.broadcastAll({type:e.RECEIVED_ANALYTICS,payload:t})}))}flushViewQueue(e){const t=this.viewQueue.get(e)||[];for(const e of t)this.analyticsStore.track(e);this.viewQueue.delete(e)}handleFormView(e,t){const i=this.applicationController.viewedStore;if(i&&i.hasBeenViewed(e)){this.analyticsStore.track(t);return}const s=this.viewQueue.get(e)||[];D("Adding form view to analytics queue",{id:e,analytics:t});this.viewQueue.set(e,[...s,t])}listenForProxyMessage(){a.registerHandlers({[e.PROXY_ANALYTICS]:({analytics:e,id:t})=>{B.isFormView(e)?this.handleFormView(t,e):this.analyticsStore.track(e)}})}static isFormView(e){const[t]=e;return V.includes(t)}}class x{constructor({applicationController:e}){this.applicationController=e;this.listenForNavigation()}listenForNavigation(){a.registerHandlers({[e.NAVIGATE_PAGE]:({url:e,openNewTab:t,id:i})=>{const s=this.applicationController.getNavigationUrl({url:e,openNewTab:t},i);if(t)return;A(s,this.applicationController.getShouldOpenNewTab({url:e,openNewTab:t},i))}})}}class ${constructor(){this.extractedStyles={rules:{},keyframes:{}};this.crossOriginStyleSheets=new Set}extractStyles(){const e={rules:{},keyframes:{}};for(const t of document.styleSheets)if(!this.crossOriginStyleSheets.has(t))try{const i=t.cssRules||t.rules;for(const t of i)t instanceof CSSStyleRule?e.rules[t.selectorText]=this.extractProperties(t.style):t instanceof CSSKeyframesRule&&(e.keyframes[t.name]=this.extractKeyframes(t))}catch(e){this.crossOriginStyleSheets.add(t)}this.extractedStyles=e}extractProperties(e){const t={};for(const i of Array.from(e))t[i]=e.getPropertyValue(i);return t}extractKeyframes(e){const t=[];for(const i of e.cssRules){if(!(i instanceof CSSKeyframeRule))continue;const e=this.extractProperties(i.style);t.push({keyText:i.keyText,style:e})}return t}}class G{constructor(){this.analyticsStore=H;this.analyticsProxyController=new B({analyticsStore:this.analyticsStore,applicationController:this});this.navigationProxyController=new x({applicationController:this});this.styleExtractorController=new $}getNavigationUrl(e,t){return e.url}getShouldOpenNewTab(e,t){return e.openNewTab}}class U{constructor(){this.handleIntersection=e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;this.onElementAppear(t);this.observedElements.delete(t);this.observer.unobserve(t)}}))};this.observer=new IntersectionObserver(this.handleIntersection,{threshold:.5});this.observedElements=new Map}onElementAppear(e){const t=this.observedElements.get(e);t&&t(e)}observe(e,t){if((()=>{const t=e.getBoundingClientRect(),i=window.innerHeight;return t.bottom>=0&&t.top<i})())t(e);else if(!this.observedElements.has(e)){this.observedElements.set(e,t);this.observer.observe(e)}}unobserve(e){if(this.observedElements.has(e)){this.observedElements.delete(e);this.observer.unobserve(e)}}}function q(){return new U}function j(e,t){const i=[...e].filter((([e,i])=>t(i,e)));return new Map(i)}function W(e,t){const i=[...e].sort((([e,i],[s,n])=>t(i,n)));return new Map(i)}function z(e,t){const i=new Map(e);for(const[e,s]of t)i.set(e,s);return i}function Y(e){const t=t=>{"Escape"===t.key&&e()};document.addEventListener("keydown",t);return()=>{document.removeEventListener("keydown",t)}}function Q(e,t){let i,s=0;return function(){const n=this,o=arguments,r=Date.now();if(r-s>=t){i&&window.clearTimeout(i);e.apply(n,o);s=r}else i||(i=window.setTimeout((()=>{e.apply(n,o);s=Date.now();i=void 0}),t))}}const X={BANNER:"BANNER",MODAL:"MODAL",SLIDE_IN:"SLIDE_IN",EMBEDDED:"EMBEDDED"},K="na1",J=e=>/^app(-[a-z1-9]{3})?.hubspot(qa)?.com$/.test(e),Z=()=>document.getElementById("hubspot-web-interactives-loader"),ee=(e,t)=>{if(!t)return null;const i=t.getAttribute(e);return i||null},te=e=>{const t=ee("data-hsjs-portal",e);return t?parseInt(t,10):null},ie=e=>{const t=ee("data-hsjs-env",e);return t||"prod"},se=e=>{const t=ee("data-hsjs-hublet",e);return t||K},ne=e=>{const t=ee("data-hsjs-local",e);return!!t&&"true"===t},oe=e=>ee("src",e),re=()=>{const e=Z();return e?{portalId:te(e),env:ie(e),hublet:se(e),isLocal:ne(e),src:oe(e)}:null},ae=()=>window,ce=()=>"about:blank"===ae().location.href||J(window.location.hostname),le=["previewInteractiveId","preview_web_interactive","preview_key","_preview","portalId","hs_preview"];function he(){const e=new URLSearchParams(ae().location.search),t={};e.forEach(((e,i)=>{le.includes(i)||(t[i]=e)}));return t}function de({contentId:e,portalId:t,env:i,hublet:s,useSameOrigin:n=!1}){const o="qa"===i?"qa":"",r=s===K?"":`-${s}`,a=document.location.protocol;return n?`${window.location.origin}/hs-web-interactive-${t}-${e}`:`${a}//${t}.hs-sites${o}${r}.com/hs-web-interactive-${t}-${e}`}function ue(e,t,i){const s=ae();let n={};t.contactPreviewEmail&&(n.email=t.contactPreviewEmail);const o=i.analytics;if(o){const e=o.hutk;e&&(n.utk=e);if(t.isUngatedFor("Permissions:Personalize")){const e=o.hstc;e&&(n.hstc=e)}}s.location.search.includes("hs_debug_interactive")&&(n.hs_debug_interactive="true");t.isScreenshot&&(n.isScreenshot="true");const r=he();n=Object.assign({},r,n);return f(e,n)}function me(e,t){if(null==e)return{};var i,s,n={},o=Object.keys(e);for(s=0;s<o.length;s++){i=o[s];t.indexOf(i)>=0||(n[i]=e[i])}return n}const ge={APP:"app",APP_API:"app-api"};function pe(e,t){const i=t&&t.hubletOverride?t.hubletOverride:e,s=t&&!0===t.hubletizeNa1;return i!==K||s?`-${i}`:""}function ve(e,t,i){if(i&&i.hubletPostfixLocation&&"domain"===i.hubletPostfixLocation)return t;t===ge.APP_API&&(t=ge.APP);return`${t}${pe(e,i)}`}function fe(e,t,i){return`${Ce(i)}${Te(t,i)}${Ee(e,i)}`}function Te(e,t){return"qa"===(t&&t.envOverride?t.envOverride:e)?"qa":""}function Ce(e){return e&&e.domainOverride?e.domainOverride:"hubspot"}function Ee(e,t){return t&&t.hubletPostfixLocation&&"domain"===t.hubletPostfixLocation?pe(e,t):""}function Se(e){return e&&e.tldOverride?e.tldOverride:"com"}function be(e){return e===ge.APP_API?"/api":""}function ye(e,t,i,s){return`https://${ve(t,e,s)}.${fe(t,i,s)}.${Se(s)}${be(e)}`}function we(e,t){t.hutk&&e.searchParams.set("utk",`${t.hutk}`);t.hstc&&e.searchParams.set("__hstc",`${t.hstc}`);t.hssc&&e.searchParams.set("__hssc",`${t.hssc}`);t.referrer&&e.searchParams.set("referrer",`${t.referrer}`);t.pageId&&e.searchParams.set("contentId",t.pageId)}function Ie({contentIds:e,currentUrl:t,isPreview:i,portalId:s,env:n,hublet:o=K,versionId:r,analytics:a,extraParams:c,path:l}){let h="";if(window.location.search.includes("useLocalPublicService"))h=`https://local.hubspotqa.com/web-interactives/public/v1/${l}`;else{h=ye(o===K?"cta-service-cms2":"cta",o,n,{tldOverride:"com",domainOverride:"hubspot"});h=`${h}/web-interactives/public/v1/${l}`}const d=new URL(h);i&&d.searchParams.set("isPreview","true");e&&e.length&&e.forEach((e=>d.searchParams.append("contentIds",`${e}`)));s&&d.searchParams.set("portalId",`${s}`);t&&!i&&d.searchParams.set("currentUrl",t);r&&d.searchParams.set("versionId",`${r}`);a&&!i&&we(d,a);c&&Object.keys(c).forEach((e=>d.searchParams.set(e,`${c[e]}`)));return d.href}const Ae=["previewScheduled","templatePath","isMobile"],Oe="embed/combinedConfigs",_e="embed/templateConfig";function Me(e){let{previewScheduled:t,templatePath:i,isMobile:s}=e,n=me(e,Ae),o="";o=i?_e:Oe;const r={};t&&(r.previewScheduled="true");i&&(r.templatePath=i);s&&(r.isMobile="true");return Ie(Object.assign({},n,{extraParams:r,path:o}))}const Le={TOP:"TOP",BOTTOM:"BOTTOM",TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"},Pe=-1,Re=(e,t=1)=>{if(!e)return{r:null,g:null,b:null,a:t};if(3===(e=e.replace("#","")).length){const t=e.split("").reduce(((e,t)=>e+t+t),"");e=t}return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:t}},Fe=(e,t=1)=>{const i=Re(e,t);return`rgba(${i.r}, ${i.g}, ${i.b}, ${i.a})`};class Ne{constructor(){this.fetchConfigs=()=>{const e=this.store.state.configRequest;if(!e)return Promise.resolve(null);const t=Me(e);return this.fetch(t)};this.handleFetchFailed=()=>{this.store.setState((e=>Object.assign({},e,{requestError:!0})))};this.handleFetchSucceded=({sortedAudienceConfigs:e,requestedConfigs:t})=>{const i=structuredClone(this.configs);e&&e.length&&e.forEach((e=>i.set(e.contentModelId,e)));t&&t.length&&t.forEach((e=>{i.has(e.contentModelId)||i.set(e.contentModelId,e)}));this.store.setState((e=>Object.assign({},e,{configs:i,isLoaded:!0})))};this.handleTemplateSucceded=e=>{const t=Object.assign({},e,{contentModelId:Pe});this.store.setState((e=>Object.assign({},e,{templateConfig:t,isLoaded:!0})))};const e={configs:new Map,configRequest:null,requestError:!1,isLoaded:!1};this.store=new y(e)}init(e){this.store.setState((t=>Object.assign({},t,{configRequest:e})));return this.fetchConfigs()}subscribe(e){return this.store.subscribe(e)}get configs(){return this.store.state.configs}get isLoaded(){return this.store.state.isLoaded}get sortedConfigsWithSpecificty(){return W(this.configsWithAudience,((e,t)=>t.specificity-e.specificity))}get configsWithAudience(){return j(this.configs,(e=>e.specificity>0))}get overlayedConfigsWithNoAudience(){return j(this.overlayedConfigs,(e=>!e.specificity))}get overlayedConfigs(){return j(this.configs,(e=>e.containerType!==X.EMBEDDED))}get embeddedConfigs(){const e=j(this.configs,(e=>e.containerType===X.EMBEDDED));this.templateConfig&&this.templateConfig.containerType===X.EMBEDDED&&e.set(Pe,this.templateConfig);return e}get templateConfig(){return this.store.state.templateConfig}get previewConfig(){const[e]=this.store.state.configs.values();return e}fetch(e){return window.hsWebInteractivesConfigResponseOverride&&ce()?Promise.resolve(window.hsWebInteractivesConfigResponseOverride).then((e=>{if(!e){this.handleFetchFailed();return Promise.resolve(null)}e.templatePath?this.handleTemplateSucceded(e):this.handleFetchSucceded(e);return e})):fetch(e).then((e=>{if(!e.ok){this.handleFetchFailed();return Promise.resolve(null)}return e.json().then((e=>{e.templatePath?this.handleTemplateSucceded(e):this.handleFetchSucceded(e);return e})).catch(this.handleFetchFailed)})).catch(this.handleFetchFailed)}fetchConfigsWithIds(e){const t=this.store.state.configRequest;if(!t)return;const i=Me(Object.assign({},t,{contentIds:e}));this.fetch(i)}static getStylesFromContainerStyles(e){let t=e.width.value||5,i=e.height.value||5;"px"===e.width.units&&(t=Math.max(t,5));"px"===e.height.units&&(i=Math.max(i,5));return{width:`${t}${e.width.units}`,height:`${i}${e.height.units}`}}static getStylesForIframe(e){const t={},{border:i,borderRadius:s,boxShadow:n}=e;i&&(t.border=`${i.width.value}${i.width.units} ${i.style} ${Fe(i.color,i.opacity/100)}`);n&&n.css&&(t.boxShadow=n.css.split(":")[1]);s&&(t.borderRadius=`${s.value}${s.units}`);return t}static isFloatingButtonLike(e){return"isDismissable"in e&&(e.containerType===X.SLIDE_IN&&!e.isDismissable)}static isTopBannerLike(e){return e.containerType===X.BANNER&&e.containerStyles.position===Le.TOP}static buildConfigRequest(e,t=[],i){const{isPreview:s,currentUrl:n,portalId:o,env:r,hublet:a,isMobile:c,templatePath:l,versionId:h}=e;return{contentIds:t,currentUrl:n,portalId:o,env:r,hublet:a,analytics:Object.assign({},i),isMobile:c,isPreview:s,templatePath:l,versionId:h}}}var ke=new Ne;const He=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),De=()=>{const e=navigator.userAgent,t=/iPhone/i.test(e),i=/iPad/i.test(e)||/Macintosh/i.test(e)&&navigator.maxTouchPoints>1,s=/iPod/i.test(e);return t||i||s},Ve=["hs_preview","preview_key"],Be=e=>({bfCacheReload:[23273748,19651225].includes(e),closeCTAOnNavigation:[23273748,1854059].includes(e),abTestingIdMisMatch:[22812424,44289455,24020940].includes(e)});class xe{constructor(){this.portalId=0;this.env="";this.hublet=K;this.isLocal=!1;this.isMobile=!1;this.isLiveHSPage=!1;this.isPreview=!1;this.isScreenshot=!1;this.isTemplate=!1;this.previewScheduled=!1;this.enableResponsiveStyles=!1;this.isPreviewPage=!1;this.gates=[];this.patches={bfCacheReload:!1,closeCTAOnNavigation:!1,abTestingIdMisMatch:!1};this.win=ae();this.currentUrl=this.win.location.href}init(){this._setEnvProps();this._setUrlProps()}_setEnvProps(){var e,t,i;const s=re();this.portalId=s.portalId;this.hublet=s.hublet;this.env=s.env;this.isLocal=s.isLocal;this.isMobile=He();this.isPreviewPage=Ve.some((e=>this.win.location.search.includes(e)));this.pageId=(null===(e=this.win.hsVars)||void 0===e?void 0:e.analytics_page_id)||(null===(t=this.win.hsVars)||void 0===t?void 0:t.page_id);this.isLiveHSPage=Boolean(this.pageId);this.language=null===(i=this.win.hsVars)||void 0===i?void 0:i.language;this.patches=Be(this.portalId)}isCosPreviewPage(){const e=this.win.location.toString();return/preview(-[^.]+)?\.hs-sites(qa)?(-[^.]+)?\.com/g.test(e)||/hubspotpreview(qa)?(-[^.]+)?/.test(e)||this.win.location.search.includes("hs_preview")||this.win.location.search.includes("preview_key")}isCos(){if(this.win.hsVars&&this.win.hsVars.portal_id)return!0;return[...document.getElementsByTagName("meta")].some((e=>"generator"===e.getAttribute("name")&&"HubSpot"===e.getAttribute("content")))}_setUrlProps(){const e=new URLSearchParams(this.win.location.search);if(e.has("templatePath")){this.templatePath=e.get("templatePath");this.isTemplate=!0}e.has("previewScheduled")&&(this.previewScheduled="true"===e.get("previewScheduled"));e.has("enableResponsiveStyles")&&(this.enableResponsiveStyles="true"===e.get("enableResponsiveStyles"));e.has("versionId")&&(this.versionId=parseInt(e.get("versionId"),10));if(e.has("screenshotBodyHeight")){this.screenshotBodyHeight=parseInt(e.get("screenshotBodyHeight"),10);this.isScreenshot=!0}if(e.has("publishedPreview")){this.isPreview=!0;this.previewScheduled=!0;this.versionId=-1}if(e.has("previewInteractiveId")){this.previewId=parseInt(e.get("previewInteractiveId"),10);this.isPreview=!0}this.isPreview&&e.has("email")&&(this.contactPreviewEmail=e.get("email"));this.currentUrl=this.win.location.href}setGates(e){this.gates=e}isUngatedFor(e){return this.gates.includes(e)}refresh(){this._setUrlProps()}}var $e=new xe;class Ge{constructor(){this.markAsViewed=e=>{this.store.setState((t=>Object.assign({},t,{viewed:new Set([...t.viewed,e])})))};const e={viewed:new Set};this.store=new y(e)}subscribe(e){this.store.subscribe(e)}hasBeenViewed(e){return this.store.state.viewed.has(e)}get viewed(){return this.store.state.viewed}}function Ue(){return new Ge}const qe="hs-cta-trigger-button",je="hs-cta-embed",We="web-interactives-preview-wrapper";var ze=()=>Array.from(document.getElementsByClassName(qe));var Ye=()=>Array.from(document.getElementsByClassName(je));const Qe=()=>{try{return Array.from(document.querySelectorAll("a[href*='HS_DISPLAY_CALL_TO_ACTION'"))}catch(e){return[]}},Xe=e=>{const t=e.getAttribute("href");if(!t)return null;const i=/\(([^)]+)\)/.exec(t);if(!i)return null;const s=i[1];return s?JSON.parse(s.replace(/(['"])?([a-z0-9A-Z_]+)(['"])?:/g,'"$2": ').replaceAll("'",'"')).id:null};var Ke=e=>{const t=Array.from(e.classList).filter((e=>e.startsWith(qe)&&e!==qe||e.startsWith(je)&&e!==je)).map((e=>e.split("-").pop()));let i=Number(t);if(Number.isNaN(i)){const t=e.dataset.hubspotWrapperCtaId;i=Number(t)}return i};function Je(e){return Number(e.dataset.hubspotWrapperCtaId)}function Ze(){return Array.from(document.querySelectorAll(".hs-web-interactive-inline[data-hubspot-wrapper-cta-id]"))}const et=()=>{const e=new Map,t=new Map,i=new Map,s=new Set,n=new Set,o=new Set,r=(t,i)=>{const s=e.get(t);s?s.add(i):e.set(t,new Set([i]))};ze().forEach((e=>{const t=Ke(e);s.add(t);r(t,e)}));Ye().forEach((e=>{const i=Ke(e);n.add(i);const s=t.get(i);s?t.set(i,[...s,e]):t.set(i,[e])}));Qe().forEach((e=>{const t=Xe(e);if(t){s.add(t);r(t,e)}}));Ze().forEach(((e,t)=>{const s=Je(e);if(!s)return;e.id=`hs-interactive-container-${s}-${t}`;o.add(s);const n=i.get(s);n?i.set(s,[...n,e]):i.set(s,[e])}));const a=[...new Set([...s,...n,...o])];return{clickTriggerButtons:e,embedContainers:t,nonFramedCTAContainers:i,clickTriggerIds:s,embedIds:n,nonFramedIds:o,uniqueIds:a}},tt=(e,t)=>{const i=document.createElement("div");i.innerHTML=t;return i.firstElementChild};let it={data:""},st=e=>{try{let t=e?e.querySelector("#_goober"):self._goober;return t||(t=(e||document.head).appendChild(document.createElement("style")),t.innerHTML=" ",t.id="_goober"),t.firstChild}catch(e){}return it},nt=/(?:([a-z0-9-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(})/gi,ot=/\/\*.*?\*\/|\s{2,}|\n/gm,rt=(e,t,i)=>{let s="",n="",o="";for(let r in e){let a=e[r];if("object"==typeof a){let e=t+" "+r;/&/g.test(r)&&(e=r.replace(/&/g,t)),"@"==r[0]&&(e=t,"f"==r[1]&&(e=r)),/@k/.test(r)?n+=r+"{"+rt(a,"","")+"}":n+=rt(a,e,e==t?r:i||"")}else/^@i/.test(r)?s=r+" "+a+";":o+=rt.p?rt.p(r.replace(/[A-Z]/g,"-$&").toLowerCase(),a):r.replace(/[A-Z]/g,"-$&").toLowerCase()+":"+a+";"}if(o[0]){let e=t+"{"+o+"}";return i?n+i+"{"+e+"}":s+e+n}return s+n},at={},ct=(e,t,i,s)=>{let n=e.toLowerCase?e:function e(t){let i="";for(let s in t)"object"==typeof val?i+=s+e(t[s]):i+=s+t[s];return i}(e),o=at[n]||(at[n]=".go"+n.split("").reduce(((e,t)=>101*e+t.charCodeAt(0)>>>0),11));return((e,t,i)=>{t.data.indexOf(e)<0&&(t.data=i?e+t.data:t.data+e)})(at[o]||(at[o]=rt(e[0]?(e=>{let t,i=[{}];for(;t=nt.exec(e.replace(ot,""));)t[4]&&i.shift(),t[3]?i.unshift(i[0][t[3]]=i[0][t[3]]||{}):t[4]||(i[0][t[1]]=t[2]);return i[0]})(e):e,i?"":o)),t,s),o.slice(1)},lt=(e,t,i)=>e.reduce(((e,s,n)=>{let o=t[n];if(o&&o.call){let e=o(i),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&e.props?"":e}return e+s+(null==o?"":o)}),"");function ht(e){let t=this||{},i=e.call?e(t.p):e;return ct(i.map?lt(i,[].slice.call(arguments,1),t.p):i,st(t.target),t.g,t.o)}ht.bind({g:1});const dt=ht(["position:fixed;display:block;width:100%;height:0px;margin:0px;padding:0px;overflow:visible;transform-style:preserve-3d;background:transparent;backface-visibility:hidden;pointer-events:none;left:0px;z-index:9998;"]),ut=ht(["top:0px;z-index:9999;height:100%;width:100%;"]),mt=ht(["bottom:0px;"]),gt=ht(["position:fixed;z-index:9989;"]),pt=ht(["left:0;bottom:0;"]),vt=ht(["right:0;bottom:0;"]),ft=ht(["left:0;top:0;"]),Tt=ht(["right:0;top:0;"]),Ct=ht(["position:relative;overflow:hidden;display:none;"]),Et=ht(["display:block;"]),St="hs-web-interactives-banner-style-element",bt="hs-web-interactives-top-banner-open",yt="hs-web-interactives-top-anchor",wt="hs-web-interactives-top-push-anchor",It="hs-web-interactives-bottom-anchor",At="hs-web-interactives-floating-container",Ot="hs-web-interactives-floating-top-left-anchor",_t="hs-web-interactives-floating-top-right-anchor",Mt="hs-web-interactives-floating-bottom-left-anchor",Lt="hs-web-interactives-floating-bottom-right-anchor",Pt=e=>`\n  .${bt} .hs-is-fixed-element {\n    translate: 0px ${e}px!important;\n  }\n`,Rt=()=>`\n<div class="${dt} ${ut}" id="${yt}"></div>\n<div class="${dt} ${mt}" id="${It}"></div>\n<div id="${At}">\n  <div id="${Ot}" class="${gt} ${ft}" >\n  </div>\n  <div id="${_t}" class="${gt} ${Tt}">\n  </div>\n  <div id="${Mt}" class="${gt} ${pt}">\n  </div>\n  <div id="${Lt}" class="${gt} ${vt}">\n  </div>\n</div>\n`;class Ft{constructor(){this.render();this.topPushAnchor=document.getElementById(wt);this.topAnchor=document.getElementById(yt);this.bottomAnchor=document.getElementById(It);this.floatingAnchors={[Le.TOP_LEFT]:document.getElementById(Ot),[Le.TOP_RIGHT]:document.getElementById(_t),[Le.BOTTOM_LEFT]:document.getElementById(Mt),[Le.BOTTOM_RIGHT]:document.getElementById(Lt)};this.bottomRightFloatingButtonAnchor=this.floatingAnchors.BOTTOM_RIGHT}attachInteractiveOverlayToAnchor(e){e.containerType!==X.MODAL?e.isFloatingButtonLike?this.attachFloatingButton(e):e.containerType!==X.BANNER&&e.containerType!==X.SLIDE_IN||this.attachBanner(e):this.attachModal(e)}attachModal(e){this.topAnchor.appendChild(e.container)}attachBanner(e){e.position===Le.BOTTOM||e.position===Le.BOTTOM_LEFT||e.position===Le.BOTTOM_RIGHT?this.bottomAnchor.appendChild(e.container):e.position!==Le.TOP&&e.position!==Le.TOP_RIGHT&&e.position!==Le.TOP_LEFT||this.topAnchor.appendChild(e.container)}attachFloatingButton(e){const t=this.floatingAnchors[e.position];t&&t.appendChild(e.container)}addMarginForConversations(e){this.bottomRightFloatingButtonAnchor.style.marginBottom=`${e}px`}removeMarginForConversations(){this.bottomRightFloatingButtonAnchor.style.marginBottom=""}insertPushBanner(){const e=document.createElement("div");e.id=wt;e.classList.add(Ct);document.body.prepend(e)}setTopPushHeight(e){this.topPushAnchor.style.height=`${e}px`}showPushBanner(e){this.setTopPushHeight(e);this.topPushAnchor.classList.add(Et);document.body.classList.add(bt);const t=document.createElement("style");t.id=St;t.innerHTML=Pt(e);document.head.appendChild(t)}hidePushBanner(){this.topPushAnchor.classList.remove(Et);document.body.classList.remove(bt);const e=document.getElementById(St);e&&document.head.removeChild(e)}render(){this.insertPushBanner();document.body.insertAdjacentHTML("beforeend",Rt())}}const Nt=ht(["position:absolute;pointer-events:none;width:101vw;height:101vh;background:rgba(0,0,0,0.7);opacity:0;z-index:-1;"]),kt=ht(["z-index:99998;opacity:0.8;visibility:visible;pointer-events:all;cursor:pointer;"]),Ht=ht(["overflow:hidden;"]);class Dt{constructor({parent:e,handleClick:t=(()=>{})}){this.disableBodyScroll=!1;this.overlay=document.createElement("div");this.overlay.id="hs-interactives-modal-overlay";this.overlay.classList.add(Nt);this.handleClick=t;this.render(e);this.listenForClick()}listenForClick(){this.overlay.addEventListener("click",this.handleClick)}enableDisableBodyScroll(){this.disableBodyScroll=!0}show(){this.overlay.classList.add(kt);this.disableBodyScroll&&document.body.classList.add(Ht)}hide(){this.overlay.classList.remove(kt);document.body.classList.remove(Ht)}render(e){e.appendChild(this.overlay)}}const Vt={modalPosition:null,bannerPositions:{TOP_LEFT:null,TOP_RIGHT:null,BOTTOM_LEFT:null,BOTTOM_RIGHT:null,BOTTOM:null,TOP:null},floatingPositions:{TOP_LEFT:null,TOP_RIGHT:null,BOTTOM_LEFT:null,BOTTOM_RIGHT:null}},Bt=[Le.TOP,Le.TOP_LEFT,Le.TOP_RIGHT],xt=[Le.BOTTOM,Le.BOTTOM_LEFT,Le.BOTTOM_RIGHT];class $t{constructor({isMobile:e=!1}){this.isMobile=!1;this.store=new y(Vt);this.isMobile=e}setPositionFromConfig(e){const{contentModelId:t,containerType:i,containerStyles:{position:s}}=e,n=Ne.isFloatingButtonLike(e);i===X.MODAL?this.setModalPosition(t):i!==X.BANNER&&!X.SLIDE_IN||n?n&&this.setFloatingPosition(s,t):this.setBannerPosition(s,t)}get modalPosition(){return this.store.state.modalPosition}get bannerPositions(){return this.store.state.bannerPositions}get floatingPositions(){return this.store.state.floatingPositions}canBeInsertedIntoPosition(e){return this.isMobile?this.canBeInsertedIntoPositionMobile(e):this.canBeInsertedIntoPositionDesktop(e)}canBeInsertedIntoPositionMobile(e){const t=Ne.isFloatingButtonLike(e);return e.containerType===X.MODAL?!this.modalPosition:e.containerType===X.BANNER||e.containerType===X.SLIDE_IN&&!t?Object.keys(this.bannerPositions).reduce(((e,t)=>e&&!this.bannerPositions[t]),!0):!!t&&Object.keys(this.floatingPositions).reduce(((e,t)=>e&&!this.floatingPositions[t]),!0)}canBeInsertedIntoPositionDesktop(e){const t=Ne.isFloatingButtonLike(e);return e.containerType===X.MODAL?!this.modalPosition:e.containerType===X.BANNER||e.containerType===X.SLIDE_IN&&!t?xt.includes(e.containerStyles.position)?!this.bannerPositions[Le.BOTTOM]&&!this.bannerPositions[Le.BOTTOM_LEFT]&&!this.bannerPositions[Le.BOTTOM_RIGHT]:!!Bt.includes(e.containerStyles.position)&&(!this.bannerPositions[Le.TOP]&&!this.bannerPositions[Le.TOP_LEFT]&&!this.bannerPositions[Le.TOP_RIGHT]):!!t&&!this.floatingPositions[e.containerStyles.position]}setModalPosition(e){this.store.setState((t=>Object.assign({},t,{modalPosition:e})))}setBannerPosition(e,t){this.store.setState((i=>{const s=i.bannerPositions;return Object.assign({},i,{bannerPositions:Object.assign({},s,{[e]:t})})}))}setFloatingPosition(e,t){this.store.setState((i=>{const s=i.floatingPositions;return Object.assign({},i,{floatingPositions:Object.assign({},s,{[e]:t})})}))}getAllIds(){const e=[];"number"==typeof this.modalPosition&&null!==this.modalPosition&&e.push(this.modalPosition);for(const[t,i]of Object.entries(this.bannerPositions))i&&Number.isInteger(i)&&e.push(i);for(const[t,i]of Object.entries(this.floatingPositions))i&&Number.isInteger(i)&&e.push(i);return e}removeCTA(e){this.modalPosition===e&&this.store.setState((e=>Object.assign({},e,{modalPosition:null})));for(const[t,i]of Object.entries(this.bannerPositions))i===e&&this.store.setState((e=>Object.assign({},e,{bannerPositions:Object.assign({},e.bannerPositions,{[t]:null})})));for(const[t,i]of Object.entries(this.floatingPositions))i===e&&this.store.setState((e=>Object.assign({},e,{floatingPositions:Object.assign({},e.floatingPositions,{[t]:null})})))}wouldConflictWithPosition(e,t,i){if(this.canBeInsertedIntoPosition(e))return!1;this.removeCTA(t);const s=this.canBeInsertedIntoPosition(e),n=i.configs.get(t);n&&this.setPositionFromConfig(n);return s}}function Gt(e){return new $t({isMobile:e})}const Ut=6e4,qt=1440*Ut,jt=7*qt,Wt=4*jt,zt={REPEAT_ONCE:"REPEAT_ONCE",REPEAT_FOREVER:"REPEAT_FOREVER",ONCE_OFF:"ONCE_OFF"},Yt={DAYS:"DAYS",MONTHS:"MONTHS",WEEKS:"WEEKS",MINUTES:"MINUTES"},Qt=Object.freeze({DAYS:qt,MONTHS:Wt,WEEKS:jt,MINUTES:Ut}),Xt="hs-cta-interactions",Kt="cta",Jt=1;let Zt;const ei=async()=>{Zt||(Zt=new Promise(((e,t)=>{const s=indexedDB.open(Xt,Jt);s.onerror=e=>{t(new Error("Failed to open IndexedDB"))};s.onupgradeneeded=e=>{e.target.result.createObjectStore(Kt,{keyPath:"id"})};s.onsuccess=t=>{i("db load success");e(t.target.result)}})));return await Zt};let ti=null;const ii=async()=>{const e=(await ei()).transaction(Kt,"readonly").objectStore(Kt).getAll();return new Promise(((t,i)=>{e.onsuccess=()=>{ti=e.result;t(e.result)};e.onerror=()=>{i(new Error("Failed to eagerly load saved frequency rules"))}}))},si=()=>{if(null==ti)throw new Error("[getAllEagerlyLoadedSavedFrequencyRules] Saved frequency rules were not eagerly loaded");return ti},ni=e=>{var t;if(null==ti)throw new Error("[getEagerlyLoadedCtaSavedFrequencyRules] Saved frequency rules were not eagerly loaded");return null===(t=ti.find((t=>t.id===e)))||void 0===t?void 0:t.savedFrequencyRules},oi=async(e,t)=>{const i=(await ei()).transaction(Kt,"readwrite").objectStore(Kt).put({id:e,savedFrequencyRules:t});return new Promise(((t,s)=>{i.onsuccess=()=>{t()};i.onerror=()=>{s(new Error(`Failed to save cta ${e} frequency rules`))}}))},ri=async e=>{const t=(await ei()).transaction(Kt,"readwrite").objectStore(Kt).delete(e);return new Promise(((i,s)=>{t.onsuccess=()=>{i()};t.onerror=()=>{s(new Error(`Failed to clear cta ${e} saved frequency rules`))}}))};let ai=null;const ci=()=>{if(null==ai)try{localStorage.setItem("hs-cta-test","test");const e=localStorage.getItem("hs-cta-test");localStorage.removeItem("hs-cta-test");ai="test"===e}catch(e){ai=!1}return ai},li=()=>"indexedDB"in window,hi="WI_FREQUENCY",di={backoffTimeDuration:2,backoffTimeUnit:Yt.WEEKS},ui={frequency:zt.REPEAT_ONCE,backoff:di},mi=e=>{try{var t,i;return null!==(t=null===(i=ni(e))||void 0===i?void 0:i.timeSaved)&&void 0!==t?t:null}catch(e){return null}},gi=e=>{try{const t=localStorage.getItem(`${hi}_${e}`);if(!t)return null;const i=JSON.parse(t),s=Number(i.timeSaved);return isNaN(s)?i.frequency===zt.ONCE_OFF?Date.now():null:s}catch(e){return null}},pi=e=>{const t=gi(e);if(null!=t)return t;if(ci())return null;if(!li())return null;return mi(e)},vi=(e,t)=>{var i;if((t=null!==(i=t)&&void 0!==i?i:ui).frequency===zt.REPEAT_FOREVER)return!1;const s=pi(e);if(null==s)return!1;if(t.frequency===zt.ONCE_OFF)return!0;if(t.frequency===zt.REPEAT_ONCE){var n;const e=null!==(n=t.backoff)&&void 0!==n?n:di,i=e.backoffTimeDuration,o=e.backoffTimeUnit,r=i*Qt[o];return s>Date.now()-r}return!1},fi=(e,t)=>{var s,n;const o=(t=null!==(s=t)&&void 0!==s?s:ui).frequency,r=null!==(n=t.backoff)&&void 0!==n?n:di,a={frequency:o,timeSaved:Date.now(),backoffTimeDuration:r.backoffTimeDuration,backoffTimeUnit:r.backoffTimeUnit};if(o!==zt.REPEAT_FOREVER){try{localStorage.setItem(`${hi}_${e}`,JSON.stringify(a))}catch(e){return}oi(e,a).catch((t=>{i(`Failed to save frequency rules for ${e} to indexedDB, error: ${t}`)}))}},Ti=e=>{if(e.frequency===zt.ONCE_OFF)return!1;if(e.frequency===zt.REPEAT_FOREVER)return!0;if(e.frequency===zt.REPEAT_ONCE){const t=e.timeSaved,i=e.backoffTimeDuration,s=e.backoffTimeUnit,n=i*Qt[s];return Date.now()>t+n}return!1},Ci=()=>{const e=Object.keys(localStorage).filter((e=>e.startsWith(hi)));for(const t of e)try{const e=JSON.parse(localStorage.getItem(t));if(!Ti(e))continue;localStorage.removeItem(t)}catch(e){continue}},Ei=()=>{try{const e=si();for(const t of e)Ti(t.savedFrequencyRules)&&ri(t.id).catch((e=>{i(`Failed to clear stale frequency rules for ${t.id} from indexedDB, error: ${e}`)}))}catch(e){return}},Si=ht(["display:block !important;position:static !important;box-sizing:border-box !important;background:transparent !important;border:none;min-height:0px !important;max-height:none !important;margin:0px;padding:0px !important;height:100% !important;width:1px !important;max-width:100% !important;min-width:100% !important;"]);function bi(e,t={}){i("Setting style on element",t,e);for(const i in t)Object.hasOwnProperty.call(t,i)&&(e.style[i]=t[i])}const yi="hs-cta-embed__loaded",wi=()=>{};class Ii{constructor({src:e,contentId:t,containerStyle:i,configStyle:s,iframeStyle:n,containerType:o,isFloatingButtonLike:r,isTopBanner:a,isActiveAbTest:c,srcdoc:l,isPersonalizationEnabled:h}){this.isOpen=!1;this.onClose=wi;this.handleStart=e=>{if((this.isActiveAbTest||this.isPersonalizationEnabled)&&e.containerStyles){this.iframeStyle=Ne.getStylesForIframe(e.containerStyles);this.containerStyle=Ne.getStylesFromContainerStyles(e.containerStyles);this.frameComponent.setShouldResize(e.containerStyles.scaleHeightToFitContent||Boolean(e.containerStyles.isSingleModuleOnly));this.applyStyleElements()}};this.setDeferredPromise();this.container=document.createElement("div");this.contentId=t;this.container.id=`hs-overlay-cta-${t}`;this.frameComponent=b({container:this.container,id:t,iframeSrc:e,onFrameReady:this.resolveFrameload,resizeHeight:s.scaleHeightToFitContent||Boolean(s.isSingleModuleOnly),useResponsiveStyling:s.useResponsiveStyling,extraAttributes:{"aria-label":"Popup CTA",title:"Popup CTA",allow:"autoplay; fullscreen; clipboard-write"},srcdoc:l});this.frameComponent.iframe.setAttribute("data-test-id","interactive-frame");this.frameComponent.iframe.classList.add(Si);this.containerStyle=i;this.iframeStyle=n;this.configStyle=s;this.containerType=o;this.position=s.position||null;this.isFloatingButtonLike=r;this.isTopBanner=a;this.isActiveAbTest=c;this.isPersonalizationEnabled=h;this.applyStyleElements();this.render();this.listenForStart()}applyStyleElements(){this.frameComponent.setStyle(this.iframeStyle);bi(this.container,this.containerStyle)}setDeferredPromise(){this.frameLoadPromise=new Promise((e=>{this.resolveFrameload=e}))}open(){return this.frameLoadPromise.then((()=>{this.frameComponent.setStyle({visibility:""});this.container.classList.add(yi);this.internalOpen();this.isOpen=!0})).catch((()=>{}))}close(){this.isOpen=!1}render(){}skipAnimation(){}setAnimationForClickTrigger(){}registerResizeHandler(t){this.frameComponent.iframeCommunicator.registerHandlers({[e.NEW_HEIGHT]:t})}registerCloseHandler(t){this.frameComponent.iframeCommunicator.registerHandlers({[e.CLOSE_INTERACTIVE]:t})}listenForStart(){this.frameComponent.iframeCommunicator.registerHandlers({[e.STARTED]:this.handleStart})}internalOpen(){}internalClose(){}remove(){this.frameComponent.iframeCommunicator.remove();this.container.remove()}}const Ai=(...e)=>{i("[overlays/Modal]",...e)},Oi=ht(["z-index:99999;visibility:hidden;position:absolute;inset:50vh auto auto 50%;left:50%;top:50%;transform:translate(-50%,-50%) translateY(100vh);pointer-events:none;max-height:95%;max-width:95%;"]),_i=ht(["pointer-events:auto !important;visibility:visible;transform:translate(-50%,-50%) translateY(0);transition:transform 0.75s linear(0,0.006,0.023 2.2%,0.096 4.8%,0.532 15.4%,0.72 21%,0.793,0.853 26.7%,0.902,0.941,0.968 36.2%,0.987 39.7%,1 43.7%,1.007 48.3%,1.009 55.3%,1.002 78.2%,1 );"]),Mi=ht(["transition:opacity 0.3s ease-in;"]);class Li extends Ii{internalOpen(){this.container.classList.add(_i);this.focusElement()}focusElement(){try{this.frameComponent.iframe.focus()}catch(e){Ai("Frame not defined",e)}}setAnimationForClickTrigger(){this.container.classList.add(Mi)}close(){super.close();this.container.classList.remove(_i)}render(){this.container.classList.add(Oi);this.container.setAttribute("role","dialog");this.container.setAttribute("aria-modal","true")}}const Pi=ht(["pointer-events:auto !important;visibility:visible !important;max-height:95vh !important;transition:max-height 1s ease-in;"]),Ri=ht(["z-index:9999;width:100%;max-height:0px;position:fixed;max-height:95%;visibility:hidden;"]),Fi=ht(["z-index:9999;width:100%;max-height:0px;position:fixed;max-height:95%;visibility:hidden;bottom:0px;"]),Ni={[Le.TOP]:Ri,[Le.BOTTOM]:Fi};class ki extends Ii{internalOpen(){this.container.classList.add(Pi)}close(){super.close();this.container.classList.remove(Pi)}addPositionClass(){const{position:e}=this.configStyle;this.container.classList.add(Ni[e])}render(){this.addPositionClass();this.container.classList.add(Ri)}}const Hi=ht(["visibility:hidden;"]),Di=ht(["visibility:visible !important;"]);class Vi extends Ii{internalOpen(){this.container.classList.add(Di)}close(){super.close();this.container.classList.remove(Di)}render(){this.container.classList.add(Hi)}}const Bi=ht(["pointer-events:auto !important;visibility:visible !important;max-height:95vh !important;transform:none !important;"]),xi=ht(["z-index:9999;width:100%;max-height:0px;position:fixed;max-height:95%;visibility:hidden;transition:transform 1s linear(0,0.006,0.022 2.3%,0.091 5.1%,0.18 7.6%,0.508 16.3%,0.607,0.691,0.762,0.822 28.4%,0.872,0.912 35.1%,0.944 38.9%,0.968 43%,0.985 47.6%,0.996 53.1%,1.001 58.4%,1.003 65.1%,1 );"]),$i=ht(["z-index:9999;position:fixed;left:10px;top:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),Gi=ht(["z-index:9999;position:fixed;right:10px;top:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),Ui=ht(["z-index:9999;position:fixed;left:10px;bottom:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),qi=ht(["z-index:9999;position:fixed;right:10px;bottom:10px;max-height:95vh !important;max-width:95%;visibility:hidden;"]),ji=ht(["transition:none !important;"]),Wi={[Le.BOTTOM_RIGHT]:qi,[Le.BOTTOM_LEFT]:Ui,[Le.TOP_RIGHT]:Gi,[Le.TOP_LEFT]:$i};class zi extends Ii{internalOpen(){this.container.classList.add(Bi)}close(){super.close();this.container.classList.remove(Bi)}skipAnimation(){this.container.classList.add(ji)}addPositionClass(){const{position:e}=this.configStyle;this.container.classList.add(Wi[e])}addOffset(){const e=this.containerStyle.width;if(!e)return;switch(this.configStyle.position){case Le.BOTTOM_LEFT:case Le.TOP_LEFT:this.container.style.transform=`translateX(-${e})`;return;case Le.BOTTOM_RIGHT:case Le.TOP_RIGHT:this.container.style.transform=`translateX(calc(100% + ${e}))`;return}}render(){this.addPositionClass();this.addOffset();this.container.classList.add(xi);this.container.setAttribute("role","dialog")}}function Yi(e,t){const i=Ne.isFloatingButtonLike(e),s=Ne.isTopBannerLike(e),n={src:t,configStyle:e.containerStyles,contentId:e.contentModelId,containerType:e.containerType,containerStyle:Ne.getStylesFromContainerStyles(e.containerStyles),iframeStyle:Ne.getStylesForIframe(e.containerStyles),isFloatingButtonLike:i,isTopBanner:s,isActiveAbTest:e.isActiveAbTest,srcdoc:e.srcdoc,isPersonalizationEnabled:e.isPersonalizationEnabled};if(i)return new Vi(n);switch(e.containerType){case X.MODAL:return new Li(n);case X.BANNER:return new ki(n);case X.SLIDE_IN:return new zi(n);default:return null}}function Qi(e){return e.button<2}const Xi=(...e)=>{i("[ClickTrigger",...e)},Ki=ht(["cursor:pointer;"]);class Ji{constructor(e,t){this.button=e;this.onClick=t;this.init();this.addA11yAttributes()}addA11yAttributes(){this.button.setAttribute("aria-haspopup","dialog");this.button.setAttribute("tabindex","0")}init(){Xi("Setting up click trigger");this.button.removeAttribute("href");this.button.removeAttribute("target");this.button.classList.add(Ki);this.button.removeAttribute("href");this.button.removeAttribute("target");this.button.addEventListener("mouseup",(e=>{Xi("Mouse up on click trigger",e);Qi(e)&&this.onClick()}));this.button.addEventListener("keypress",(e=>{if("Enter"===e.key){Xi("Enter on click trigger",e);this.onClick()}}))}}class Zi{constructor({onTrigger:e}){this.isExitIntent=e=>{if(!e)return!1;return!e.relatedTarget&&e.clientY<100};this.handleMouseOut=e=>{this.isExitIntent(e)&&this.onTrigger(this)};this.onTrigger=e;this.setup()}setup(){document.addEventListener("mouseout",this.handleMouseOut)}remove(){document.removeEventListener("mouseout",this.handleMouseOut)}}const es=1e3,ts=["mousedown","mousemove","keypress","scroll","touchstart"];class is{constructor({onTrigger:e,value:t}){this.resetTimer=()=>{this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout((()=>this.onTrigger(this)),this.seconds)};this.onTrigger=e;this.seconds=t*es;this.timeout=null;this.setup()}setup(){this.timeout=setTimeout((()=>this.onTrigger(this)),this.seconds);ts.forEach((e=>{document.addEventListener(e,this.resetTimer)}))}remove(){ts.forEach((e=>{document.removeEventListener(e,this.resetTimer)}));this.timeout&&clearTimeout(this.timeout)}}function ss(){let e=!1;try{const t={get passive(){e=!0}};window.addEventListener("test",t,t);window.removeEventListener("test",t,t)}catch(t){e=!1}return e}function ns(){return Math.max(document.body.offsetHeight,document.body.scrollHeight)}function os(){return Math.max(window.innerHeight||0,document.documentElement.clientHeight)}function rs(){return document.body.scrollTop||document.documentElement.scrollTop}class as{constructor({onTrigger:e,value:t}){this.handleScroll=()=>{const e=ns()-os();100*rs()/e>=this.scrollPercent&&this.onTrigger(this)};this.onTrigger=e;this.scrollPercent=t;this.supportsPassiveScrolling=ss();this.setup()}setup(){this.supportsPassiveScrolling?window.addEventListener("scroll",this.handleScroll,{capture:!0,passive:!0}):window.addEventListener("scroll",this.handleScroll,!0)}remove(){this.supportsPassiveScrolling?window.removeEventListener("scroll",this.handleScroll,{capture:!0}):window.removeEventListener("scroll",this.handleScroll,!0)}}const cs=1e3;function ls(){return document.timeline&&document.timeline.currentTime?document.timeline.currentTime:performance?performance.now():0}class hs{constructor({onTrigger:e,value:t}){this.onTrigger=e;const i=ls();this.ms=Math.max(t*cs-i,0);this.timeout=null;this.setup()}setup(){this.timeout=setTimeout((()=>{this.onTrigger(this)}),this.ms)}remove(){this.timeout&&clearTimeout(this.timeout)}}class ds{constructor({onTrigger:e}){this.heightCache={portrait:0,landscape:0};this.heightIncreaseSeen=!1;this.lastTouchMove=0;this.lastClick=0;this.trigger=()=>{this.onTrigger(this)};this.onTrigger=e;this.setup()}setup(){this.setupCloseWatcher();this.setupVisibilityListener();this.setupIOSViewportListener()}remove(){this.cleanup()}setupCloseWatcher(){if("CloseWatcher"in window){this.closeWatcher=new window.CloseWatcher;this.closeWatcher.oncancel=e=>{e.preventDefault();this.trigger()}}else;}setupVisibilityListener(){this.visibilityListener=()=>{"visible"===document.visibilityState&&setTimeout((()=>this.trigger()),100)};document.addEventListener("visibilitychange",this.visibilityListener,{passive:!0});if(De()){this.blurListener=()=>this.trigger();window.addEventListener("blur",this.blurListener,{passive:!0})}}setupIOSViewportListener(){if(!De()||!window.visualViewport)return;const e=window.visualViewport,t=()=>e.width>e.height?"landscape":"portrait";this.heightCache[t()]=e.height;this.touchMoveListener=()=>this.lastTouchMove=Date.now();this.clickListener=()=>this.lastClick=Date.now();this.backButtonListener=()=>this.lastTouchMove=Date.now();this.menuButtonListener=()=>this.lastTouchMove=Date.now();this.viewportResizeListener=()=>{const i=Date.now(),s=t(),n=e.height;if(n>this.heightCache[s])this.heightIncreaseSeen=!0;else{this.heightCache[s]=n;const e=i-this.lastTouchMove>500,t=i-this.lastClick>500;this.heightIncreaseSeen&&e&&t&&this.trigger()}};e.addEventListener("resize",this.viewportResizeListener,{passive:!0});document.addEventListener("touchmove",this.touchMoveListener,{passive:!0});document.addEventListener("click",this.clickListener,{passive:!0});document.addEventListener("backbutton",this.backButtonListener,!1);document.addEventListener("menubutton",this.menuButtonListener,!1)}cleanup(){var e,t;null===(e=this.closeWatcher)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e);if(this.visibilityListener){document.removeEventListener("visibilitychange",this.visibilityListener);this.visibilityListener=void 0}if(this.blurListener){window.removeEventListener("blur",this.blurListener);this.blurListener=void 0}if(this.viewportResizeListener&&window.visualViewport){window.visualViewport.removeEventListener("resize",this.viewportResizeListener);this.viewportResizeListener=void 0}if(this.touchMoveListener){document.removeEventListener("touchmove",this.touchMoveListener);this.touchMoveListener=void 0}if(this.clickListener){document.removeEventListener("click",this.clickListener);this.clickListener=void 0}if(this.backButtonListener){document.removeEventListener("backbutton",this.backButtonListener);this.backButtonListener=void 0}if(this.menuButtonListener){document.removeEventListener("menubutton",this.menuButtonListener);this.menuButtonListener=void 0}}}const us={SCROLL:"scroll",EXIT_INTENT:"exit-intent",MOBILE_EXIT_INTENT:"mobile-exit-intent",WAIT:"wait",INACTIVITY:"inactivity"};function ms(e,t){const{showOnPageScroll:i,showOnExitIntent:s,showAfterDelay:n,showAfterInactivity:o,pageScrollPercentageTrigger:r,delayInSeconds:a,inactivityInSeconds:c}=e,l=[];i&&l.push(new as({onTrigger:()=>t(us.SCROLL),value:r||0}));s&&(He()?l.push(new ds({onTrigger:()=>t(us.MOBILE_EXIT_INTENT)})):l.push(new Zi({onTrigger:()=>t(us.EXIT_INTENT)})));n&&l.push(new hs({onTrigger:()=>t(us.WAIT),value:a||0}));o&&l.push(new is({onTrigger:()=>t(us.INACTIVITY),value:c||0}));return l}function gs(e,t){const i=new ResizeObserver((i=>{for(const s of i)s.target===e&&s.contentRect&&t(s.contentRect.height,s.contentRect.height)}));i.observe(e);return()=>i.disconnect()}const ps="hubspot-messages-iframe-container",vs=()=>{},fs=220,Ts=400,Cs="userInteractedWithWidget";class Es{constructor(e){this.disconnectResizeObserver=vs;this.conversationsFrameContainer=null;this.handleConversationsReady=()=>{this.addConversationsEventListeners();this.pollForConversationsRendered().then((()=>{this.conversationsFrameContainer=document.getElementById(ps);this.addConversationsStyleSheet();this.listenForConversationsHeightChange();this.setFloatingButtonOffset()})).catch((()=>{}))};this.overlayContainer=e;this.listenForConversationsReady()}listenForConversationsReady(){window.HubSpotConversations?this.handleConversationsReady():window.hsConversationsOnReady&&window.hsConversationsOnReady.length?window.hsConversationsOnReady=[...window.hsConversationsOnReady,this.handleConversationsReady]:window.hsConversationsOnReady=[this.handleConversationsReady]}listenForConversationsHeightChange(){if(!this.conversationsFrameContainer)return;const e=gs(this.conversationsFrameContainer,(e=>{this.conversationsFrameContainer&&e<fs&&this.setFloatingButtonOffset()}));this.disconnectResizeObserver=e}addConversationsEventListeners(){window.HubSpotConversations&&window.HubSpotConversations.on(Cs,(()=>{He()&&this.removeConversationsStyleSheet()}))}pollForConversationsRendered(){return new Promise((e=>{const t=setInterval((()=>{if(document.getElementById(ps)){e();clearInterval(t)}}),Ts)}))}setFloatingButtonOffset(){if(!this.overlayContainer||!this.conversationsFrameContainer)return;const e=this.conversationsFrameContainer.clientHeight;this.overlayContainer.addMarginForConversations(e)}addConversationsStyleSheet(){const e=document.createElement("style");e.id="web-interactives-conversations-override";e.innerHTML="#hubspot-messages-iframe-container { z-index: 9990!important; }";document.head.appendChild(e)}removeConversationsStyleSheet(){const e=document.getElementById("web-interactives-conversations-override");e&&e.remove()}}function Ss(e){return new Es(e)}class bs{constructor(){this.eventEmitter=n()}static getInstance(){bs.instance||(bs.instance=new bs);return bs.instance}emit(e,t){this.eventEmitter.emit(e,t)}on(e,t){this.eventEmitter.on(e,t)}off(e){this.eventEmitter.off(e)}reset(){this.eventEmitter.reset()}}const ys={REFRESH:"REFRESH",CLOSE:"CLOSE",CLOSE_ALL:"CLOSE_ALL",TRIGGER_OPEN:"TRIGGER_OPEN",REPLACED_INLINE_HTML:"REPLACED_INLINE_HTML"},ws={HAS_CLOSED:"HAS_CLOSED",CTA_TRIGGERED:"CTA_TRIGGERED"},Is=a;class As{constructor({configModel:t,environmentModel:i,analyticsModel:s,scheduledCTAsModel:n,handleView:o,scheduleCTA:r}){this.triggerMap=new Map;this.shownModal=null;this.triggeredCTAFromCallback=null;this.clickTriggerComponentMap=new Map;this.interactiveComponentMap=new Map;this.conversationsController=null;this.eventManager=bs.getInstance();this.listenForKeypress=()=>{Y((()=>{this.shownModal&&this.closeOverlay(this.shownModal)}))};this.sendAnalyticsToCTA=t=>{Is.broadcast(t,{type:e.RECEIVED_ANALYTICS,payload:this.analyticsModel.analytics})};this.handleTrigger=(e,t,i)=>{if(!vi(e,t)){this.eventManager.emit(ws.CTA_TRIGGERED,{id:e,triggerType:i});this.openOverlay(e);for(const[t,i]of this.triggerMap)t===e&&i.forEach((e=>e.remove()));this.triggerMap.delete(e)}};this.handleTriggerFromCTA=({triggerCTA:e,id:t})=>{this.interactiveComponentMap.has(t)&&(this.interactiveComponentMap.has(e)?this.shouldCloseCalloutCTA(t)&&this.closeOverlay(t):this.triggeredCTAFromCallback=[e,t]);this.interactiveComponentMap.has(e)?this.handleClickOpen(e):this.scheduledCTAsModel.scheduledCTAs.has(e)||this.scheduleCTA(e)};this.handleClickOpen=e=>{const t=this.interactiveComponentMap.get(e);t&&t.isOpen?this.closeOverlay(e):this.openOverlay(e,!0)};this.handleOverlayClick=()=>{if(!Number.isInteger(this.shownModal))return;const e=this.configModel.configs.get(this.shownModal);e&&e.containerStyles.closeOnOverlayClick&&this.closeOverlay(this.shownModal)};this.handlePageNavigation=({id:e,openNewTab:t,url:i})=>{t||T(window.location.href,i)||this.shouldCloseCalloutCTA(e)&&this.environmentModel.patches.closeCTAOnNavigation&&this.shouldCloseCalloutCTA(e)&&this.closeOverlay(e)};this.handleFormSubmission=({id:e})=>{const t=this.configModel.configs.get(e);t&&t.shouldCloseOnFormSubmission&&t.isDismissable&&this.closeOverlay(e)};this.closeOverlay=e=>{const t=this.interactiveComponentMap.get(e);if(t){t.isTopBanner&&this.overlayedInteractivesContainer.hidePushBanner();t.containerType===X.MODAL&&this.overlay.hide();t.close();e===this.shownModal&&(this.shownModal=null);document.activeElement instanceof HTMLElement&&document.activeElement.blur();this.messageCTAClosed(e)}};this.configModel=t;this.environmentModel=i;this.analyticsModel=s;this.scheduledCTAsModel=n;this.overlayedInteractivesContainer=null;this.overlay=null;this.handleView=o;this.scheduleCTA=r;this.listenToConfigUpdates();this.listenForOpenCTAMessage();this.listenForKeypress();this.registerMessageHandlers();this.triggerOpen=this.handleClickOpen}init({clickTriggerButtons:e}){this.positionsOccupied=Gt(this.environmentModel.isMobile);this.overlayedInteractivesContainer=new Ft;this.overlay=new Dt({parent:this.overlayedInteractivesContainer.topAnchor,handleClick:this.handleOverlayClick});this.conversationsController=Ss(this.overlayedInteractivesContainer);this.createClickTriggerComponents(e)}registerMessageHandlers(){Is.registerHandlers({[e.TRIGGER_CTA]:this.handleTriggerFromCTA,[e.NAVIGATE_PAGE]:this.handlePageNavigation,[e.CTA_FORM_SUBMITTED]:this.handleFormSubmission});this.eventManager.on(ys.TRIGGER_OPEN,(({ctaToOpen:e})=>this.handleClickOpen(e)))}createClickTriggerComponents(e){for(const[t,i]of e)i.forEach((e=>{const i=new Ji(e,(()=>this.handleClickOpen(t))),s=this.clickTriggerComponentMap.get(t)||[];this.clickTriggerComponentMap.set(t,[...s,i])}))}createOverlayInteractiveFromAudience(e){if(!this.shouldCreateInteractiveOverlay(e))return!1;if(!this.createOverlayComponentAndSetOnMap(e))return!1;this.positionsOccupied.setPositionFromConfig(e);const t=ms(e.triggers,(t=>this.handleTrigger(e.contentModelId,e.displayFrequency,t)));this.triggerMap.set(e.contentModelId,t);return!0}createOverlayInteractivesWithAudience(){for(const[e,t]of this.configModel.sortedConfigsWithSpecificty)this.createOverlayInteractiveFromAudience(t)}createOverlayInteractivesWithNoAudience(){for(const[e,t]of this.configModel.overlayedConfigsWithNoAudience){if(this.interactiveComponentMap.has(e))continue;if(!this.createOverlayComponentAndSetOnMap(t))return;if(this.scheduledCTAsModel.scheduledCTAs.has(e)){this.openOverlay(e,!0);this.scheduledCTAsModel.removeCTA(e)}this.sendAnalyticsToCTA(e)}}createTemplateOverlayInteractive(){this.createOverlayComponentAndSetOnMap(this.configModel.templateConfig)}createPreviewOverlayInteractive(){this.createOverlayComponentAndSetOnMap(this.configModel.previewConfig)}createOverlayComponentAndSetOnMap(e){const t=Yi(e,e.iframeSrc&&ue(e.iframeSrc,this.environmentModel,this.analyticsModel));if(!t)return null;const i=e.contentModelId;if(this.triggeredCTAFromCallback){const[e]=this.triggeredCTAFromCallback;i===e&&t.skipAnimation()}this.interactiveComponentMap.set(i,t);this.overlayedInteractivesContainer.attachInteractiveOverlayToAnchor(t);t.registerResizeHandler((({height:e})=>{t.isTopBanner&&this.overlayedInteractivesContainer.setTopPushHeight(e)}));t.registerCloseHandler((()=>this.closeOverlay(e.contentModelId)));return t}shouldCreateInteractiveOverlay(e){return!(vi(e.contentModelId,e.displayFrequency)&&!this.clickTriggerComponentMap.has(e.contentModelId))&&!!this.positionsOccupied.canBeInsertedIntoPosition(e)}listenToConfigUpdates(){this.configModel.store.subscribe(((e,t)=>{if(this.environmentModel.isPreview&&1===e.configs.size){this.createPreviewOverlayInteractive();requestAnimationFrame((()=>{this.configModel.previewConfig&&this.openOverlay(this.configModel.previewConfig.contentModelId)}))}else if(0===t.configs.size&&e.configs.size>0)setTimeout((()=>{this.createOverlayInteractivesWithAudience();this.createOverlayInteractivesWithNoAudience();this.overlay&&this.overlay.enableDisableBodyScroll()}));else if(e.templateConfig){this.createTemplateOverlayInteractive();requestAnimationFrame((()=>{this.openOverlay(Pe)}))}else{e.configs.size>t.configs.size&&this.createOverlayInteractivesWithNoAudience();if(this.triggeredCTAFromCallback){const[t,i]=this.triggeredCTAFromCallback;if(e.configs.has(t)){this.triggeredCTAFromCallback=null;this.shouldCloseCalloutCTA(i)&&this.closeOverlay(i)}}}}))}listenForOpenCTAMessage(){window.addEventListener("message",(t=>{t&&t.data&&t.data.type===e.DISPLAY_CALL_TO_ACTION&&this.openOverlay(t.data.id)}))}openOverlay(t,s=!1){const n=this.interactiveComponentMap.get(t);if(n){n.isTopBanner&&this.overlayedInteractivesContainer.showPushBanner(n.container.clientHeight);s&&n.setAnimationForClickTrigger();n.open().then((()=>{n.isTopBanner&&this.overlayedInteractivesContainer.showPushBanner(n.container.clientHeight);if(n.containerType===X.MODAL){this.shownModal=t;this.overlay.show()}this.handleView(t);Is.broadcast(t,{type:e.SHOWING_CTA,payload:{}})})).catch((e=>{i("Error opening overlay",e)}))}}messageCTAClosed(t){Is.broadcast(t,{type:e.HAS_CLOSED,payload:{}});this.eventManager.emit(ws.HAS_CLOSED,{id:t})}shouldCloseCalloutCTA(e){const t=this.configModel.configs.get(e);return!!t&&t.isDismissable}}function Os(e){return class extends e{constructor(e){super(e);this.processConfigResponse=e=>{if(!e)return;const t=e.sortedAudienceConfigs,i=this.getShowingCTAIds(),s=[];for(const e of i){if(!t.find((t=>t.contentModelId===e))){s.push(e);continue}t.findLast((t=>{var i;return t.contentModelId!==e&&(null===(i=this.positionsOccupied)||void 0===i?void 0:i.wouldConflictWithPosition(t,e,this.configModel))}))&&s.push(e)}this.handleRemovingCTAs(s);this.createCTAsFromConfigs(t.reverse())};this.registerEventManagerEventHandlers()}registerEventManagerEventHandlers(){this.eventManager.on(ys.REFRESH,(()=>{this.handleRefresh().catch((e=>{i("Error calling refresh handler:",e)}))}));this.eventManager.on(ys.CLOSE,(({id:e})=>this.closeOverlay(e)));this.eventManager.on(ys.CLOSE_ALL,(()=>this.handleCloseAll()))}handleCloseAll(){this.getShowingCTAIds().forEach((e=>this.closeOverlay(e)))}async handleRefresh(){this.environmentModel.refresh();await this.analyticsModel.refresh();const e=await this.configModel.init(Ne.buildConfigRequest(this.environmentModel,[],this.analyticsModel.store.state));this.processConfigResponse(e)}getShowingCTAIds(){return this.positionsOccupied?this.positionsOccupied.getAllIds():[]}handleRemovingCTAs(e){for(const t of e){this.closeOverlay(t);const e=this.interactiveComponentMap.get(t);e&&e.remove();this.interactiveComponentMap.delete(t);this.positionsOccupied&&this.positionsOccupied.removeCTA(t);for(const[e,i]of this.triggerMap){e===t&&i.forEach((e=>e.remove()));this.triggerMap.delete(t)}}}createCTAsFromConfigs(e){for(const t of e)this.createOverlayInteractiveFromAudience(t)}}}var _s=Os(As);const Ms="hs-cta-embed__loaded";class Ls{constructor({contentId:e,embedContainer:t,iframeSrc:i,useResponsiveStyling:s,srcdoc:n}){this.listenForLoad();this.frameComponent=b({id:e,container:t,iframeSrc:i,resizeHeight:!0,onFrameReady:this.resolveFrameload,useResponsiveStyling:s,extraAttributes:{"aria-label":"Embedded CTA",title:"Embedded CTA",allow:"autoplay; fullscreen; clipboard-write"},srcdoc:n});this.frameComponent.iframe.setAttribute("data-test-id","interactive-frame");this.frameComponent.iframe.classList.add(Si);this.contentId=e;this.embedContainer=t}setStyles(e,i,s){this.frameComponent.setShouldResize(s);t(this.embedContainer,e);this.frameComponent.setStyle(Object.assign({},i));this.resolveConfig&&this.resolveConfig()}showFrame(){this.frameComponent.setStyle({visibility:""})}listenForLoad(){const e=new Promise((e=>{this.resolveFrameload=e})),t=new Promise((e=>{this.resolveConfig=e}));Promise.all([e,t]).then((()=>{Array.from(this.embedContainer.children).forEach((e=>{e!==this.frameComponent.iframe&&this.embedContainer.removeChild(e)}));this.embedContainer.classList.add(Ms);this.showFrame()})).catch((()=>{}))}}class Ps{constructor({environmentModel:e,configStore:t,handleView:i,analyticsModel:s,scheduledCTAsModel:n}){this.embeddedInteractives=new Map;this.elementObserver=q();this.styledComponentSet=new Set;this.flushScheduledCTAs=()=>{for(const e of this.scheduledCTAsModel.scheduledCTAs){const t=this.configStore.embeddedConfigs.get(e);if(!t||t.isHTMLVersionOnly)continue;if(!this.scheduledCTAsModel.elementsForEmbeddedCTAs.has(e))continue;this.scheduledCTAsModel.elementsForEmbeddedCTAs.get(e).forEach((t=>{this.createView(e,t)}));this.handleView(e);this.scheduledCTAsModel.removeCTA(e)}};this.environmentModel=e;this.configStore=t;this.scheduledCTAsModel=n;this.handleView=i;this.analyticsModel=s}init({embedContainers:e}){this.embedContainers=e;this.environmentModel.isPreview||this.environmentModel.isTemplate||this.createViews();this.listenForConfigs();this.listenForElementViews();this.listenForScheduledCTAs()}listenForScheduledCTAs(){this.scheduledCTAsModel.subscribe(this.flushScheduledCTAs)}listenForElementViews(){if(this.embedContainers)for(const[e,t]of this.embedContainers)for(const i of t)this.elementObserver.observe(i,(()=>this.handleView(e)))}listenForConfigs(){this.configStore.configs.size>0?this.setStylesOnContainer():this.configStore.subscribe((()=>{this.scheduledCTAsModel.scheduledCTAs.size>0&&this.flushScheduledCTAs();if(this.configStore.embeddedConfigs.size>0){(this.environmentModel.isPreview||this.environmentModel.isTemplate)&&this.configStore.embeddedConfigs.size>0&&this.createViews();this.setStylesOnContainer()}}))}setStylesOnContainer(){for(const[e,t]of this.configStore.embeddedConfigs){const i=this.embeddedInteractives.get(e);i&&i.length&&i.forEach((e=>{if(!this.styledComponentSet.has(e)){this.styledComponentSet.add(e);e.setStyles(Ne.getStylesFromContainerStyles(t.containerStyles),Ne.getStylesForIframe(t.containerStyles),t.containerStyles.scaleHeightToFitContent||Boolean(t.containerStyles.isSingleModuleOnly))}}))}}createViews(){for(const[e,t]of this.embedContainers){let i;const s=this.configStore.embeddedConfigs.get(e);i=s?s.iframeSrc:de({contentId:e,portalId:this.environmentModel.portalId,env:this.environmentModel.env,hublet:this.environmentModel.hublet});i=i&&ue(i,this.environmentModel,this.analyticsModel);const n=[];t.forEach((t=>{const o=new Ls({contentId:e,embedContainer:t,iframeSrc:i,useResponsiveStyling:!!s&&s.containerStyles.useResponsiveStyling,srcdoc:null==s?void 0:s.srcdoc});n.push(o)}));this.embeddedInteractives.set(e,n)}}createView(e,t){const i=this.configStore.embeddedConfigs.get(e);if(!i)return;const s=i.iframeSrc&&ue(i.iframeSrc,this.environmentModel,this.analyticsModel),n=new Ls({contentId:e,embedContainer:t,iframeSrc:s,useResponsiveStyling:i.containerStyles.useResponsiveStyling,srcdoc:i.srcdoc}),o=this.embeddedInteractives.get(e)||[];this.embeddedInteractives.set(e,[...o,n]);this.setStylesOnContainer()}}const Rs="POP_OVER",Fs="hsCta";class Ns{constructor({configStore:e,environmentModel:t}){this.eventManager=bs.getInstance();this.ignoreCta=({id:e})=>{if(this.environmentModel.isPreview)return;const t=this.configStore.configs.get(e);if(t&&t.containerType!==X.EMBEDDED){fi(e,t.displayFrequency);Ci();Ei()}};this.registerPopupPolice=({id:e})=>{const t=this.configStore.configs.get(e);t&&t.containerType===X.MODAL&&window._registerAvailablePopup&&window._registerAvailablePopup(Fs,Rs)};this.configStore=e;this.environmentModel=t;this.registerHandlers()}registerHandlers(){Is.registerHandlers({[e.NAVIGATE_PAGE]:this.ignoreCta,[e.STARTED]:this.registerPopupPolice});this.eventManager.on(ws.HAS_CLOSED,this.ignoreCta)}}function ks(e){return new Ns(e)}const Hs=ht(["display:flex;justify-content:center;align-items:center;"]),Ds="interactive-ready";class Vs{constructor({environmentModel:e}){this.environmentModel=e}init(){if(this.environmentModel.isPreview||this.environmentModel.isScreenshot||this.environmentModel.templatePath){this.bodyWrapper=document.getElementsByClassName(We)[0];if(this.bodyWrapper){this.setupEmbedContainer();this.setHeightForPreview();this.listenForInteractiveLoaded()}}}setupEmbedContainer(){this.bodyWrapper.classList.add(Hs);const e=this.environmentModel.previewId||1;this.environmentModel.isTemplate?this.bodyWrapper.innerHTML=`\n        <div class="${je} ${je}-NaN" data-hubspot-wrapper-cta-id="-1"></div>\n      `:this.bodyWrapper.innerHTML=`\n        <div class="${je} ${je}-${e}">\n      `}setHeightForPreview(){this.bodyWrapper.style.height="100vh"}listenForInteractiveLoaded(){Is.registerHandlers({[e.STARTED]:()=>document.body.classList.add(Ds)})}}function Bs({environmentModel:e}){return new Vs({environmentModel:e})}const xs=e=>{let t=1,i=0;for(;t>0&&i!==e.length;){const s=e[i];"{"===s?t++:"}"===s&&t--;i++;if(i>e.length)return e.length}return i},$s=e=>window.matchMedia(e).matches,Gs=e=>e.includes("width")?"@media (min-width: 0px)":e,Us=(e,t=$s)=>{let i="",s=e,n=s.indexOf("@media");if(-1===n)return!1;for(;n>0;){i=`${i}${s.substring(0,n-1)}`;s=s.substring(n);const e=s.indexOf("{"),o=s.substring(0,e);s=s.substring(e+1);const r=xs(s);if(t(o.replace("@media ",""))){const e=s.substring(0,r-1);i=`${i}${Gs(o)} { ${e} }`}s=s.substring(r+1);n=s.indexOf("@media")}return`${i}${s}`.trim()},qs=e=>Object.keys(e).reduce(((t,i)=>{const s=Us(e[i]);return s?Object.assign({},t,{[i]:s}):t}),{});var js=(e,t)=>{let i=0;return(...s)=>{i&&clearTimeout(i);i=setTimeout((()=>{e(...s);i=0}),t)}};const Ws=(...e)=>{i("[ResponsiveController]",...e)};class zs{constructor(){this.initialStylesheets={}}init(){this.listenForStylesheetsHtml();const e=js((()=>Object.keys(this.initialStylesheets).forEach((e=>this.handleProcessStylesheets(Number(e))))),100);window.addEventListener("resize",(()=>{Ws("Resizing, reprocessing stylesheets");e()}))}listenForStylesheetsHtml(){Is.registerHandlers({[e.SEND_STYLESHEETS]:e=>{this.initialStylesheets[e.id]=e.stylesheetsHtml;this.handleProcessStylesheets(e.id)}})}handleProcessStylesheets(t){if(!this.initialStylesheets[t])return;const i=qs(this.initialStylesheets[t]);Is.broadcast(t||1,{type:e.RECEIVE_FILTERED_STYLESHEETS,payload:{stylesheets:i}})}}function Ys(){return new zs}function Qs(e,t){return"https://perf{region}.hsforms{env}.com/embed/v3/counters.gif".replace("{region}",`-${e}`).replace("{env}","qa"===t?"qa":"")}const Xs={CONFIG_LOADED_SUCCESS:"config-loaded-success",CONFIG_LOADED_FAILURE:"config-loaded-failure",INTERACTIVE_SHOWN:"interactive-shown",INTERACTIVE_CLOSED:"interactive-closed",INTERACTIVE_NAVIGATED:"interactive-navigated",INLINE_INTERACTIVE_RENDER_SUCCESS:"inline-interactive-render-success",INLINE_INTERACTIVE_RENDER_FAIL:"inline-interactive-render-fail",MOBILE_EXIT_INTENT_TRIGGERED:"mobile-exit-intent-triggered",MOBILE_EXIT_INTENT_CONVERTED:"mobile-exit-intent-converted"};class Ks{constructor({environmentModel:e,configStore:t}){this.eventManager=bs.getInstance();this.perfUrl="";this.mobileExitIntentTriggeredCTAs=new Set;this.environmentModel=e;this.configStore=t;this.registerHandlers();this.listenToConfigStore();this.listenToTriggerEvents()}init(){this.perfUrl=Qs(this.environmentModel.hublet,this.environmentModel.env)}trackRender(e){this.trackMetric(e?Xs.INLINE_INTERACTIVE_RENDER_SUCCESS:Xs.INLINE_INTERACTIVE_RENDER_FAIL)}registerHandlers(){Is.registerHandlers({[e.STARTED]:()=>this.trackMetric(Xs.INTERACTIVE_SHOWN),[e.CLOSE_INTERACTIVE]:()=>this.trackMetric(Xs.INTERACTIVE_CLOSED),[e.NAVIGATE_PAGE]:e=>{this.trackMetric(Xs.INTERACTIVE_NAVIGATED);null!=e&&e.id&&this.mobileExitIntentTriggeredCTAs.has(e.id)&&this.trackMetric(Xs.MOBILE_EXIT_INTENT_CONVERTED)}})}listenToConfigStore(){this.configStore.subscribe((e=>{e.requestError?this.trackMetric(Xs.CONFIG_LOADED_FAILURE):e.isLoaded&&this.trackMetric(Xs.CONFIG_LOADED_SUCCESS)}))}listenToTriggerEvents(){this.eventManager.on(ws.CTA_TRIGGERED,(({id:e,triggerType:t})=>{if(t===us.MOBILE_EXIT_INTENT){this.trackMetric(Xs.MOBILE_EXIT_INTENT_TRIGGERED);this.mobileExitIntentTriggeredCTAs.add(e)}}))}trackMetric(e){if(!this.perfUrl.length)return;const t=`${this.perfUrl}?key=${e}&value=1`;(new Image).src=t}}function Js(e){return new Ks(e)}function Zs({env:e,hublet:t=K}){return Ie({env:"prod"===e?"":e,hublet:t||K,path:"track",contentIds:[],extraParams:{}})}const en=(...e)=>{i("[CTAAnalyticsController]",...e)};class tn{constructor({analyticsStore:e,configsStore:t,environmentModel:i,ctaViewedStore:s}){this.timingMap=new Map;this.viewQueue=I();this.variableContentViewQueueSet=new Set;this.hasViewed=new Set;this.eventManager=bs.getInstance();this.embedIdToRenderedVariantIdMap=new Map;this.baseUrl="";this.trackView=({id:e})=>{if(!this.configStore.isLoaded){this.viewQueue.enqueue(e);return}const t=this.configStore.configs.get(e);if(!(null!=t&&t.isActiveAbTest||null!=t&&t.isPersonalizationEnabled)||this.embedIdToRenderedVariantIdMap.has(e)){this.trackWithImage(e,"view");this.timingMap.set(e,Date.now())}else this.variableContentViewQueueSet.add(e)};this.trackClose=({id:e})=>{this.trackWithImage(e,"close")};this.trackTriggerClick=({id:e})=>{this.trackNavigation({id:e},!0)};this.trackNavigation=({id:e},t=!1)=>{const i=this.configStore.configs.get(e);if(!i)return;const s=new URL(this.attachTrackingParamsToUrl(`${this.baseUrl}/click`,e));(t||i.shouldUseJsTracking)&&s.searchParams.set("beaconTrack","true");s.searchParams.has("beaconTrack")&&("sendBeacon"in navigator?navigator.sendBeacon(s):fetch(s,{method:"POST",keepalive:!0}))};this.handleCTAStarted=({id:e,contentId:t})=>{if(t){this.embedIdToRenderedVariantIdMap.set(e,t);if(this.variableContentViewQueueSet.has(e)){this.variableContentViewQueueSet.delete(e);this.trackView({id:e})}}};this.handleMeetingsSuccess=({id:e})=>{this.trackNavigation({id:e},!0)};this.analyticsStore=e;this.configStore=t;this.environmentModel=i;this.ctaViewedStore=s}init(){this.baseUrl=Zs({env:this.environmentModel.env,hublet:this.environmentModel.hublet});if(!this.environmentModel.isPreview&&!this.environmentModel.isTemplate){this.registerHandlers();this.listenForStoreLoad();this.listenForViewChange();this.handleViews()}}registerHandlers(){Is.registerHandlers({[e.CLOSE_INTERACTIVE]:this.trackClose,[e.NAVIGATE_PAGE]:this.trackNavigation,[e.TRIGGER_CTA]:this.trackTriggerClick,[e.STARTED]:this.handleCTAStarted,[e.MEETINGS_BOOKING_SUCCESS]:this.handleMeetingsSuccess});this.eventManager.on(ys.TRIGGER_OPEN,(({ctaTrigger:e})=>this.trackTriggerClick({id:e})))}listenForStoreLoad(){this.configStore.subscribe(((e,t)=>{e.isLoaded&&!t.isLoaded&&this.flushViewQueue()}))}listenForViewChange(){this.ctaViewedStore.subscribe((()=>{this.handleViews()}))}handleViews(){for(const e of this.ctaViewedStore.viewed)if(!this.hasViewed.has(e)){this.trackView({id:e});this.hasViewed.add(e)}}flushViewQueue(){do{const e=this.viewQueue.dequeue();e&&this.trackView({id:e})}while(this.viewQueue.peek())}trackWithImage(e,t){en("Tracking:",t,e);let i=`${this.baseUrl}/${t}`;i=this.attachTrackingParamsToUrl(i,e);(new Image).src=i}logMismatchedTrackingIdsSessionData(e,t,i,s){en("Logging potentially mismatched tracking IDs session data",e,t,i,{hutk:s});const n=JSON.stringify({portalId:this.environmentModel.portalId,contentIdPassed:e,contentIdAttached:t,webInteractiveIdAttached:i,hutk:s,embedIdToRenderedVariantIdMap:Object.fromEntries(this.embedIdToRenderedVariantIdMap),configs:Object.fromEntries(this.configStore.configs),variableContentViewQueueSet:Array.from(this.variableContentViewQueueSet),ctaViewedStore:Array.from(this.ctaViewedStore.viewed),communicators:JSON.stringify(Array.from(Is.iframeCommunicators.entries()).map((([e,t])=>[e,t.map((e=>[e.id,e.iframe.src]))])))});fetch(`${this.baseUrl}/log-mismatched-ids-session-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:n})}attachTrackingParamsToUrl(e,t){const i=new URL(e),s=this.configStore.configs.get(t);if(!s)return i.href;i.searchParams.set("webInteractiveContentId",String(t));if((s.isActiveAbTest||s.isPersonalizationEnabled)&&this.embedIdToRenderedVariantIdMap.has(t)){i.searchParams.set("webInteractiveContentId",String(this.embedIdToRenderedVariantIdMap.get(t)));if(this.environmentModel.patches.abTestingIdMisMatch){const e=this.analyticsStore.analytics;this.logMismatchedTrackingIdsSessionData(t,Number(i.searchParams.get("webInteractiveContentId")),s.webInteractiveId,e.hutk)}}i.searchParams.set("webInteractiveId",String(s.webInteractiveId));i.searchParams.set("containerType",s.containerType);i.searchParams.set("portalId",String(this.environmentModel.portalId));i.searchParams.set("audienceId",String(s.audienceId));s.campaignGuid&&i.searchParams.set("campaignId",s.campaignGuid);const n=this.analyticsStore.analytics;n&&Object.entries(n).forEach((([e,t])=>{t&&i.searchParams.set(e,String(t))}));const o=this.timingMap.get(t);if(o){i.searchParams.set("timeStarted",String(o));i.searchParams.set("timeFinished",String(Date.now()))}return i.href}}function sn(e){return new tn(e)}const nn=["elementToEmbed"];class on{constructor({configModel:e,customerCtaOptions:t,scheduleCTA:i}){this.defferedPromiseMap=new Map;this.handleCtaLoad=({id:e})=>{if(!this.defferedPromiseMap.has(e))return;this.defferedPromiseMap.get(e)(null);this.defferedPromiseMap.delete(e)};this.handleNavigate=({id:e})=>{const t=this.customerCtaOptions.options.get(e);t&&"function"==typeof t.onNavigate&&t.onNavigate()};this.loadCta=e=>new Promise(((t,i)=>{e||i(new Error("Invalid options"));const{contentId:s,options:n}=e,{elementToEmbed:o}=n,r=me(n,nn);s||i(new Error("Invalid options"));this.scheduleCTA(s,Array.isArray(o)?o:[o]);Object.keys(r).length&&this.customerCtaOptions.setOption(s,r);this.defferedPromiseMap.set(s,t)}));this.configModel=e;this.customerCtaOptions=t;this.scheduleCTA=i;window.hsCtasOnReady=window.hsCtasOnReady||[];this.attachToWindow();this.registerHandlers()}init(){this.flushOnReadyQueue()}registerHandlers(){Is.registerHandlers({[e.STARTED]:this.handleCtaLoad,[e.NAVIGATE_PAGE]:this.handleNavigate})}attachToWindow(){window.__PRIVATE__HubspotCtaClient={loadCta:this.loadCta}}flushOnReadyQueue(){const e=window.hsCtasOnReady;for(;e.length;){const t=e.shift();"function"==typeof t&&t()}Object.defineProperty(window.hsCtasOnReady,"push",{value:e=>{"function"==typeof e&&e()},writable:!0})}}function rn(e){return new on(e)}const an=(...e)=>{i("[NonFramedCTA]",...e)};class cn{constructor({cta:e,onNavigate:t,onView:i}){this.removeEventListenerCallbacks=[];this.elementObserver=q();this.hasView=!1;this.id="";this.cta=e;this.id=this.cta.id;this.onNavigate=t;this.onView=i;this.listenForAnchorClicks();this.listenForView()}getCtaInstance(){this.cta&&this.cta.parentNode||(this.cta=document.getElementById(this.id));return this.cta}replaceCtaInstance(e){an("Replacing html",e,this.id);const t=this.getCtaInstance();if(!t)return;const i=tt(t,e);this.removeExistingEventListeners();t.innerHTML=i.innerHTML;t.dataset.rendered="true";this.reapplyEventListeners(t)}removeExistingEventListeners(){this.hasView||this.elementObserver.unobserve(this.cta);this.removeEventListenerCallbacks.forEach((e=>e()));this.removeEventListenerCallbacks=[]}reapplyEventListeners(e){this.id=e.id;this.cta=e;this.listenForAnchorClicks();this.hasView||this.listenForView()}listenForAnchorClicks(){const e=[...this.cta.querySelectorAll("a")];"A"===this.cta.tagName&&e.push(this.cta);for(const t of e){const e="_blank"===t.target,i=e=>{e.preventDefault()};let s;t.classList.contains("hs-cta-trigger-button")&&(s=Ke(t));const n=i=>{i.preventDefault();Qi(i)&&this.onNavigate(t.href,e,s)},o=i=>{if("Enter"===i.key){i.preventDefault();this.onNavigate(t.href,e,s)}};t.addEventListener("click",i);t.addEventListener("mouseup",n);t.addEventListener("keydown",o);this.removeEventListenerCallbacks.push((()=>{t.removeEventListener("click",i);t.removeEventListener("mouseup",n);t.removeEventListener("keypress",o)}))}}listenForView(){this.elementObserver.observe(this.cta,(()=>{this.onView();this.hasView=!0;this.elementObserver.unobserve(this.cta)}))}}function ln(e){return new cn(e)}const hn=(...e)=>{i("[populateLinksWithTrackingParams]",...e)},dn=["currentUrl","referrer","canon","canonicalUrl","pageUrl","contentType","encryptedPayload","pageId","analyticsPageId","hutk","hstc","hssc","hsfp","utk","containerType","webInteractiveId","webInteractiveContentId","audienceId","campaignGuid","campaignId","userAgent","timeStarted","timeFinished","redirectUrl","skip","includeInitial","pageTitle","contentGroupId","portalId","hsCtaAttrib"],un=`https://${(new Date).getTime()}-dummy.com`,mn=(e,t)=>{let i,s=!1;try{i=new URL(e)}catch(t){hn("[populateLinksWithTrackingParams]","Checking for relative URL",e);s=!0}if(s)try{i=new URL(`${un}${e.startsWith("/"),""}${e}`)}catch(t){hn("Could not parse url for link",t);return e}Object.entries(t).forEach((([e,t])=>{dn.includes(e)?null!=t&&i.searchParams.set(e,String(t)):hn("Invalid analytics parameter passed",e)}));const n=i.href;return s?n.replace(un,""):n};var gn=(e,t=[...document.querySelectorAll(".hs-web-interactive a")])=>{t.length&&t.forEach((t=>{const i=t.getAttribute("href");i&&!i.startsWith("javascript")&&t.setAttribute("href",mn(i,e))}))};const pn=["isHubspotPage"],vn="render/html";function fn(e){let{isHubspotPage:t}=e,i=me(e,pn);const s={};t&&(s.isHubspotPage="true");return Ie(Object.assign({},i,{extraParams:s,path:vn}))}class Tn{constructor(){this.handleFetchFailed=()=>{this.store.setState((e=>Object.assign({},e,{requestError:!0})))};this.handleFetchSucceded=e=>{this.store.setState((t=>Object.assign({},t,{renderedHtmlMap:Object.assign({},t.renderedHtmlMap,{htmlMap:e}),isLoaded:!0})))};const e={renderedHtmlMap:{},request:null,requestError:!1,isLoaded:!1};this.store=new y(e)}init(e){this.store.setState((t=>Object.assign({},t,{request:e})));return this.fetchEmbeddedHtml()}subscribe(e){this.store.subscribe(e)}get renderedHtmlMap(){return this.store.state.renderedHtmlMap}get isLoaded(){return this.store.state.isLoaded}fetch(e){return fetch(e).then((e=>{if(!e.ok){this.handleFetchFailed();return Promise.resolve(null)}return e.json().then((e=>{this.handleFetchSucceded(e);return e})).catch(this.handleFetchFailed)})).catch(this.handleFetchFailed)}fetchEmbeddedHtml(){const e=this.store.state.request;if(!e)return Promise.resolve(null);const t=fn(e);return this.fetch(t)}}var Cn=new Tn;const En=(...e)=>{i("[NonFramedCTAController",...e)};class Sn{constructor({handleView:e,configStore:t,handleNavigation:i,analyticsStore:s,environmentModel:n,metricsController:o,scheduledCTAsModel:r}){this.componentMap=new Map;this.eventManager=bs.getInstance();this.cleanupFuncs=[];this.flushScheduledCTAs=()=>{for(const e of this.scheduledCTAsModel.scheduledCTAs){const t=this.configStore.embeddedConfigs.get(e);if(!t||!t.isHTMLVersionOnly)return;if(!this.scheduledCTAsModel.elementsForEmbeddedCTAs.has(e))return;const i=this.scheduledCTAsModel.elementsForEmbeddedCTAs.get(e);let s=this.nonFramedCTAContainers.get(e);s||(s=[]);this.nonFramedCTAContainers.set(e,[...s,...i]);this.createViewsForElements(e,i);this.requestHTML();this.scheduledCTAsModel.removeCTA(e)}};this.getAnchorsFromElements=e=>{let t=[];e.forEach((e=>{"A"===e.tagName&&(t=[...t,e]);t=[...t,...e.querySelectorAll("a")]}));return t};this.handleView=e;this.handleNavigation=i;this.configStore=t;this.analyticsStore=s;this.environmentModel=n;this.renderedHtmlStore=Cn;this.metricsController=o;this.scheduledCTAsModel=r}init({nonFramedCTAContainers:e}){this.nonFramedCTAContainers=e;e.size&&this.requestHTML();this.listenForConfigs();this.listenForScheduledCTAs();this.environmentModel.isPreview||this.environmentModel.isPreviewPage||this.listenForAnalyticsUpdate()}listenForScheduledCTAs(){this.scheduledCTAsModel.subscribe(this.flushScheduledCTAs)}cleanup(){this.cleanupFuncs.forEach((e=>e()))}requestHTML(){const e=e=>{if(!e)return;this.metricsController.trackRender(!0);Object.keys(e).forEach((t=>{const i=Number(t),s=e[i],n=this.componentMap.get(i);if(n)n.forEach((e=>{e.replaceCtaInstance(s)}));else{En("Views not created yet, just replacing existing elements");const e=this.nonFramedCTAContainers.get(i);e&&e.length&&e.forEach((e=>{const t=tt(e,s);e.innerHTML=t.innerHTML;e.dataset.rendered="true"}))}this.hydrateLinksWithAllData(i)}));const t=Object.keys(e).map(Number);this.eventManager.emit(ys.REPLACED_INLINE_HTML,{ids:t})},{isPreview:t,currentUrl:i,portalId:s,env:n,hublet:o,versionId:r}=this.environmentModel,a=[...this.nonFramedCTAContainers.keys()].filter((e=>!this.renderedHtmlStore.renderedHtmlMap[e]));if(!a.length)return;const c={contentIds:a,currentUrl:i,portalId:s,env:n,hublet:o,analytics:this.analyticsStore.analytics,isPreview:t,versionId:r,isHubspotPage:this.environmentModel.isCos()};En("Requesting HTML",c);this.renderedHtmlStore.init(c).then(e).catch((e=>{En("Failed getting HTML",e);this.metricsController.trackRender(!1)}))}createViewsForElements(e,t){const i=[];let s=0;for(const n of t){n.id=`hs-cta-${e}-${s++}`;const o=ln({cta:n,onNavigate:(t,i,s)=>{s?this.eventManager.emit(ys.TRIGGER_OPEN,{ctaToOpen:s,ctaTrigger:e}):this.handleNavigation(t,e,i)},onView:()=>{this.handleView(e)}});i.push(o);const r=this.configStore.configs.get(e);if(r){const i=this.getAnchorsFromElements(t);gn({webInteractiveContentId:e,webInteractiveId:r.webInteractiveId,audienceId:r.audienceId,containerType:r.containerType,campaignId:r.campaignGuid,pageUrl:this.environmentModel.currentUrl,portalId:this.environmentModel.portalId},i)}}const n=this.componentMap.get(e)||[];this.componentMap.set(e,[...n,...i])}createViews(){for(const[e,t]of this.nonFramedCTAContainers)this.createViewsForElements(e,t)}hydrateLinksWithAllData(e){let t={};const i=this.configStore.configs.get(e);i&&(t={webInteractiveContentId:e,webInteractiveId:i.webInteractiveId,audienceId:i.audienceId,containerType:i.containerType,campaignId:i.campaignGuid,pageUrl:this.environmentModel.currentUrl,portalId:this.environmentModel.portalId});const s=this.analyticsStore.analytics;t=Object.assign({},t,s);let n=[];for(const[,e]of this.nonFramedCTAContainers)n=[...n,...this.getAnchorsFromElements(e)];gn(t,n)}listenForConfigs(){this.cleanupFuncs.push(this.configStore.subscribe((()=>{this.scheduledCTAsModel.scheduledCTAs.size>0&&this.flushScheduledCTAs();this.createViews()})))}listenForAnalyticsUpdate(){const e=()=>{let e=[];for(const[,t]of this.nonFramedCTAContainers)e=[...e,...this.getAnchorsFromElements(t)];gn(this.analyticsStore.analytics,e)};this.analyticsStore.analytics.isLoaded?e():this.cleanupFuncs.push(this.analyticsStore.subscribe(((t,i)=>{!i.isLoaded&&t.isLoaded&&e()})))}}function bn(e){return new Sn(e)}const yn=["openInNewTab","onNavigate"];class wn{constructor(){const e={options:new Map};this.store=new y(e)}subscribe(e){this.store.subscribe(e)}setOption(e,t){const{openInNewTab:i,onNavigate:s}=t;me(t,yn);this.store.setState((t=>{const n=structuredClone(t.options);n.set(e,{openInNewTab:i,onNavigate:s});return Object.assign({},t,{options:n})}))}get options(){return this.store.state.options}}function In(){return new wn}class An{constructor(){const e={scheduledCTAs:new Set,elementsForEmbeddedCTAs:new Map};this.store=new y(e)}subscribe(e){this.store.subscribe(e)}scheduleCTA(e){this.store.setState((t=>Object.assign({},t,{scheduledCTAs:new Set([...t.scheduledCTAs,e])})))}scheduleEmbeddedCTA(e,t){this.store.setState((i=>Object.assign({},i,{scheduledCTAs:new Set([...i.scheduledCTAs,e]),elementsForEmbeddedCTAs:z(i.elementsForEmbeddedCTAs,new Map([[e,t]]))})))}removeCTA(e){this.store.setState((t=>{const i=structuredClone(t.scheduledCTAs);i.delete(e);return Object.assign({},t,{scheduledCTAs:i,elementsForEmbeddedCTAs:j(t.elementsForEmbeddedCTAs,((t,i)=>i!==e))})}))}get scheduledCTAs(){return this.store.state.scheduledCTAs}get elementsForEmbeddedCTAs(){return this.store.state.elementsForEmbeddedCTAs}}function On(){return new An}const _n={onCallToActionReady:"onCallToActionReady",onCallToActionViewed:"onCallToActionViewed",onCallToActionNavigated:"onCallToActionNavigated",onCallToActionFormSubmitted:"onCallToActionFormSubmitted",onCallToActionReplacedInlineHTML:"onCallToActionReplacedInlineHTML",onCallToActionMeetingBooked:"onCallToActionMeetingBooked",onCallToActionClosed:"onCallToActionClosed"},Mn="hsCallsToActionCallback",Ln=1e3;class Pn{constructor({configModel:e}){this.eventEmitter=n();this.eventManager=bs.getInstance();this.refresh=Q((()=>{this.eventManager.emit(ys.REFRESH,{})}),Ln);this.configModel=e;window.hsCallsToActionsReady=window.hsCallsToActionsReady||[];this.registerHandlers()}init(){this.attachToWindow();this.flushOnReadyQueue()}handleView(e){this.handleEventCall({id:e},_n.onCallToActionViewed)}closeAll(){this.eventManager.emit(ys.CLOSE_ALL,{})}close(e){this.eventManager.emit(ys.CLOSE,{id:e})}attachToWindow(){window.HubSpotCallsToActions={on:this.eventEmitter.on.bind(this.eventEmitter),off:this.eventEmitter.off.bind(this.eventEmitter),refresh:this.refresh,closeAll:this.closeAll.bind(this),close:this.close.bind(this)}}flushOnReadyQueue(){const e=window.hsCallsToActionsReady;for(;e.length;){const t=e.shift();"function"==typeof t&&t()}Object.defineProperty(window.hsCallsToActionsReady,"push",{value:e=>{"function"==typeof e&&e()},writable:!0})}handleEventCall(e,t){this.eventEmitter.emit(t,e);window.postMessage({type:Mn,id:e.id,eventName:t,data:e})}registerHandlers(){Is.registerHandlers({[e.STARTED]:e=>this.handleEventCall(e,_n.onCallToActionReady),[e.NAVIGATE_PAGE]:e=>this.handleEventCall(e,_n.onCallToActionNavigated),[e.CTA_FORM_SUBMITTED]:e=>this.handleEventCall(e,_n.onCallToActionFormSubmitted),[e.MEETINGS_BOOKING_SUCCESS]:e=>this.handleEventCall({id:null==e?void 0:e.id},_n.onCallToActionMeetingBooked),[e.CLOSE_INTERACTIVE]:e=>this.handleEventCall(e,_n.onCallToActionClosed)});this.eventManager.on(ys.REPLACED_INLINE_HTML,(e=>this.handleEventCall(e,_n.onCallToActionReplacedInlineHTML)))}}function Rn(e){return new Pn(e)}class Fn{constructor(e){this.environmentModel=e.environmentModel;this.configStore=e.configsStore}init(){window.addEventListener("pageshow",(e=>{e.persisted&&this.shouldReloadPage()&&window.location.reload()}))}shouldReloadPage(){return this.environmentModel.patches.bfCacheReload&&this.configStore.configs.size>0}}function Nn(e){return new Fn(e)}const kn=(...e)=>{i("[WebInteractiveApplicationContainer]",...e)};function Hn(e){const[t,i]=e.split("?");if(!i)return{location:t,queryParams:{}};return i.split("&").reduce(((e,t)=>{const[i,s]=t.split("=");return Object.assign({[i]:s},e)}),{})}class Dn extends G{constructor({configStore:e,environmentModel:t}){super();this.scheduleCTA=(e,t)=>{t?this.scheduledCTAs.scheduleEmbeddedCTA(e,t):this.scheduledCTAs.scheduleCTA(e);this.configStore.fetchConfigsWithIds([e])};this.handleView=e=>{this.viewedStore.markAsViewed(e);this.analyticsProxyController.flushViewQueue(e);this.thirdPartyApiController.handleView(e)};this.handleNavigation=(e,t,i=!1)=>{A(this.getNavigationUrl({url:e,openNewTab:i},t),i)};this.configStore=e;this.environmentModel=t;this.viewedStore=Ue();this.customerCTAOptions=In();this.scheduledCTAs=On();this.overlayedInteractivesController=new _s({configModel:this.configStore,environmentModel:t,analyticsModel:this.analyticsStore,scheduledCTAsModel:this.scheduledCTAs,handleView:this.handleView,scheduleCTA:this.scheduleCTA});this.embeddedInteractivesController=new Ps({environmentModel:t,configStore:e,scheduledCTAsModel:this.scheduledCTAs,analyticsModel:this.analyticsStore,handleView:this.handleView});this.ignorerController=ks({configStore:e,environmentModel:t});this.previewController=Bs({environmentModel:this.environmentModel});this.responsiveController=Ys();this.metricsController=Js({environmentModel:this.environmentModel,configStore:e});this.ctaAnalyticsController=sn({configsStore:this.configStore,analyticsStore:this.analyticsStore,environmentModel:this.environmentModel,ctaViewedStore:this.viewedStore});this.apiClientController=rn({configModel:this.configStore,customerCtaOptions:this.customerCTAOptions,scheduleCTA:this.scheduleCTA});this.thirdPartyApiController=Rn({configModel:this.configStore});this.nonFramedCTAController=bn({configStore:this.configStore,handleView:this.handleView,analyticsStore:this.analyticsStore,handleNavigation:this.handleNavigation,environmentModel:this.environmentModel,metricsController:this.metricsController,scheduledCTAsModel:this.scheduledCTAs});this.bfCacheController=Nn({environmentModel:this.environmentModel,configsStore:this.configStore});this.listenForConfigs()}init(){this.environmentModel.init();this.metricsController.init();this.previewController.init();this.responsiveController.init();this.parsedDomResults=et();this.configStore.init(this._buildConfigRequest()).then((e=>{this.processConfigResponse(e)})).catch((e=>{kn("Error fetching configs",e)}));this.embeddedInteractivesController.init({embedContainers:this.parsedDomResults.embedContainers});this.nonFramedCTAController.init({nonFramedCTAContainers:this.parsedDomResults.nonFramedCTAContainers});this.overlayedInteractivesController.init({clickTriggerButtons:this.parsedDomResults.clickTriggerButtons});this.ctaAnalyticsController.init();this.apiClientController.init();this.thirdPartyApiController.init();this.bfCacheController.init()}_buildConfigRequest(){let e=[];const{isPreview:t,previewId:i}=this.environmentModel;e=t&&i?[i]:[...this.parsedDomResults.uniqueIds];return Ne.buildConfigRequest(this.environmentModel,e,this.analyticsStore.store.state)}getNavigationUrl({url:e},t){const i=new URL(e);if(!i.searchParams.has("encryptedPayload"))return e;const s=Hn(e),n=this.configStore.configs.get(t);if(!n)return e;i.searchParams.set("webInteractiveId",String(n.webInteractiveId));i.searchParams.set("containerType",n.containerType);n.campaignGuid&&i.searchParams.set("campaignId",n.campaignGuid);n.contentModelId&&i.searchParams.set("webInteractiveContentId",String(n.contentModelId));n.audienceId&&i.searchParams.set("audienceId",String(n.audienceId));this.analyticsStore.analytics.hutk&&i.searchParams.set("hutk",this.analyticsStore.analytics.hutk);this.environmentModel.language&&i.searchParams.set("hsLang",this.environmentModel.language);i.searchParams.delete("encryptedPayload");return decodeURIComponent(s.encryptedPayload)===s.encryptedPayload?`${i.href}&encryptedPayload=${encodeURIComponent(s.encryptedPayload)}`:`${i.href}&encryptedPayload=${s.encryptedPayload}`}getShouldOpenNewTab(e,t){if(!this.customerCTAOptions.options.has(t))return e.openNewTab;return this.customerCTAOptions.options.get(t).openInNewTab||!1}listenForConfigs(){this.configStore.subscribe(((t,i)=>{setTimeout((()=>{if(t.configs.size!==i.configs.size)for(const[t,i]of this.configStore.configs)Is.broadcast(t,{type:e.SEND_CTA_CONFIG,payload:Object.assign({portalId:this.environmentModel.portalId,pageUrl:this.environmentModel.currentUrl,pageTitle:document.title,gates:this.environmentModel.gates,pageId:this.environmentModel.pageId,hutk:this.analyticsStore.analytics.hutk},i)})}))}))}processConfigResponse(e){if(e&&Array.isArray(e.gates)){kn("Retrieved Gates from config response",e.gates);this.environmentModel.setGates(e.gates)}}}const Vn=new Dn({configStore:ke,environmentModel:$e});window.__hsWebInteractiveInstance=Vn;var Bn=Vn;const xn=()=>!(!window.disabledHsPopups||!(window.disabledHsPopups.indexOf("LEADFLOW")>-1||window.disabledHsPopups.indexOf("CTAS")>-1))||!!window.hsInEditor;function $n(){document.querySelectorAll(".hs-cta-embed").forEach((e=>{e.classList.add("hs-cta-embed__loaded");const t=e.querySelector(".hs-cta-loading-dot__container");t&&t.remove();const i=e.querySelector(".hs-cta-embed__skeleton");i&&i.remove()}))}function Gn(){$n();new MutationObserver((e=>{for(const t of e)"childList"===t.type&&t.addedNodes.forEach((e=>{1===e.nodeType&&e instanceof HTMLElement&&e.querySelector(".hs-cta-embed")&&$n()}))})).observe(document.body,{childList:!0,subtree:!0})}const Un=async()=>{if(xn()){if(window.hsInEditor)try{Gn()}catch(e){console.error("Error marking cta embed preview as loaded",e)}}else if(window.hubspot_web_interactives_running)console.error("duplicate instance of web interactives app exists");else{window.hubspot_web_interactives_running=!0;try{li()&&await ii()}catch(e){console.error("Error eagerly loading saved frequency rules",e)}Bn.init()}},qn=()=>{Un().catch((e=>{console.error("Error initializing web interactives",e)}));document.removeEventListener("DOMContentLoaded",qn)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",qn):Un().catch((e=>{console.error("Error initializing web interactives",e)}))}();